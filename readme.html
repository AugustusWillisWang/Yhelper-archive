<!DOCTYPE html>
<!-- saved from url=(0074)file:///C:/Users/AW/AppData/Local/Temp/mume2019315-16924-g8bxuf.zb4mu.html -->
<html><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
      <title>readme</title>
      
      <meta name="viewport" content="width=device-width, initial-scale=1.0">
      
      <link rel="stylesheet" href="file:///C:/Users/AW/.vscode/extensions/shd101wyy.markdown-preview-enhanced-0.3.13/node_modules/@shd101wyy/mume/dependencies/katex/katex.min.css">
      
      
      
      
      <script type="text/javascript" src="file:///C:/Users/AW/.vscode/extensions/shd101wyy.markdown-preview-enhanced-0.3.13/node_modules/@shd101wyy/mume/dependencies/mermaid/mermaid.min.js" charset="UTF-8"></script>
      
      
      
      

      <style> 
      /**
 * prism.js Github theme based on GitHub's theme.
 * @author Sam Clarke
 */
code[class*="language-"],
pre[class*="language-"] {
  color: #333;
  background: none;
  font-family: Consolas, "Liberation Mono", Menlo, Courier, monospace;
  text-align: left;
  white-space: pre;
  word-spacing: normal;
  word-break: normal;
  word-wrap: normal;
  line-height: 1.4;

  -moz-tab-size: 8;
  -o-tab-size: 8;
  tab-size: 8;

  -webkit-hyphens: none;
  -moz-hyphens: none;
  -ms-hyphens: none;
  hyphens: none;
}

/* Code blocks */
pre[class*="language-"] {
  padding: .8em;
  overflow: auto;
  /* border: 1px solid #ddd; */
  border-radius: 3px;
  /* background: #fff; */
  background: #f5f5f5;
}

/* Inline code */
:not(pre) > code[class*="language-"] {
  padding: .1em;
  border-radius: .3em;
  white-space: normal;
  background: #f5f5f5;
}

.token.comment,
.token.blockquote {
  color: #969896;
}

.token.cdata {
  color: #183691;
}

.token.doctype,
.token.punctuation,
.token.variable,
.token.macro.property {
  color: #333;
}

.token.operator,
.token.important,
.token.keyword,
.token.rule,
.token.builtin {
  color: #a71d5d;
}

.token.string,
.token.url,
.token.regex,
.token.attr-value {
  color: #183691;
}

.token.property,
.token.number,
.token.boolean,
.token.entity,
.token.atrule,
.token.constant,
.token.symbol,
.token.command,
.token.code {
  color: #0086b3;
}

.token.tag,
.token.selector,
.token.prolog {
  color: #63a35c;
}

.token.function,
.token.namespace,
.token.pseudo-element,
.token.class,
.token.class-name,
.token.pseudo-class,
.token.id,
.token.url-reference .token.variable,
.token.attr-name {
  color: #795da3;
}

.token.entity {
  cursor: help;
}

.token.title,
.token.title .token.punctuation {
  font-weight: bold;
  color: #1d3e81;
}

.token.list {
  color: #ed6a43;
}

.token.inserted {
  background-color: #eaffea;
  color: #55a532;
}

.token.deleted {
  background-color: #ffecec;
  color: #bd2c00;
}

.token.bold {
  font-weight: bold;
}

.token.italic {
  font-style: italic;
}


/* JSON */
.language-json .token.property {
  color: #183691;
}

.language-markup .token.tag .token.punctuation {
  color: #333;
}

/* CSS */
code.language-css,
.language-css .token.function {
  color: #0086b3;
}

/* YAML */
.language-yaml .token.atrule {
  color: #63a35c;
}

code.language-yaml {
  color: #183691;
}

/* Ruby */
.language-ruby .token.function {
  color: #333;
}

/* Markdown */
.language-markdown .token.url {
  color: #795da3;
}

/* Makefile */
.language-makefile .token.symbol {
  color: #795da3;
}

.language-makefile .token.variable {
  color: #183691;
}

.language-makefile .token.builtin {
  color: #0086b3;
}

/* Bash */
.language-bash .token.keyword {
  color: #0086b3;
}

/* highlight */
pre[data-line] {
  position: relative;
  padding: 1em 0 1em 3em;
}
pre[data-line] .line-highlight-wrapper {
  position: absolute;
  top: 0;
  left: 0;
  background-color: transparent;
  display: block;
  width: 100%;
}

pre[data-line] .line-highlight {
  position: absolute;
  left: 0;
  right: 0;
  padding: inherit 0;
  margin-top: 1em;
  background: hsla(24, 20%, 50%,.08);
  background: linear-gradient(to right, hsla(24, 20%, 50%,.1) 70%, hsla(24, 20%, 50%,0));
  pointer-events: none;
  line-height: inherit;
  white-space: pre;
}

pre[data-line] .line-highlight:before, 
pre[data-line] .line-highlight[data-end]:after {
  content: attr(data-start);
  position: absolute;
  top: .4em;
  left: .6em;
  min-width: 1em;
  padding: 0 .5em;
  background-color: hsla(24, 20%, 50%,.4);
  color: hsl(24, 20%, 95%);
  font: bold 65%/1.5 sans-serif;
  text-align: center;
  vertical-align: .3em;
  border-radius: 999px;
  text-shadow: none;
  box-shadow: 0 1px white;
}

pre[data-line] .line-highlight[data-end]:after {
  content: attr(data-end);
  top: auto;
  bottom: .4em;
}html body{font-family:"Helvetica Neue",Helvetica,"Segoe UI",Arial,freesans,sans-serif;font-size:16px;line-height:1.6;color:#333;background-color:#fff;overflow:initial;box-sizing:border-box;word-wrap:break-word}html body>:first-child{margin-top:0}html body h1,html body h2,html body h3,html body h4,html body h5,html body h6{line-height:1.2;margin-top:1em;margin-bottom:16px;color:#000}html body h1{font-size:2.25em;font-weight:300;padding-bottom:.3em}html body h2{font-size:1.75em;font-weight:400;padding-bottom:.3em}html body h3{font-size:1.5em;font-weight:500}html body h4{font-size:1.25em;font-weight:600}html body h5{font-size:1.1em;font-weight:600}html body h6{font-size:1em;font-weight:600}html body h1,html body h2,html body h3,html body h4,html body h5{font-weight:600}html body h5{font-size:1em}html body h6{color:#5c5c5c}html body strong{color:#000}html body del{color:#5c5c5c}html body a:not([href]){color:inherit;text-decoration:none}html body a{color:#08c;text-decoration:none}html body a:hover{color:#00a3f5;text-decoration:none}html body img{max-width:100%}html body>p{margin-top:0;margin-bottom:16px;word-wrap:break-word}html body>ul,html body>ol{margin-bottom:16px}html body ul,html body ol{padding-left:2em}html body ul.no-list,html body ol.no-list{padding:0;list-style-type:none}html body ul ul,html body ul ol,html body ol ol,html body ol ul{margin-top:0;margin-bottom:0}html body li{margin-bottom:0}html body li.task-list-item{list-style:none}html body li>p{margin-top:0;margin-bottom:0}html body .task-list-item-checkbox{margin:0 .2em .25em -1.8em;vertical-align:middle}html body .task-list-item-checkbox:hover{cursor:pointer}html body blockquote{margin:16px 0;font-size:inherit;padding:0 15px;color:#5c5c5c;border-left:4px solid #d6d6d6}html body blockquote>:first-child{margin-top:0}html body blockquote>:last-child{margin-bottom:0}html body hr{height:4px;margin:32px 0;background-color:#d6d6d6;border:0 none}html body table{margin:10px 0 15px 0;border-collapse:collapse;border-spacing:0;display:block;width:100%;overflow:auto;word-break:normal;word-break:keep-all}html body table th{font-weight:bold;color:#000}html body table td,html body table th{border:1px solid #d6d6d6;padding:6px 13px}html body dl{padding:0}html body dl dt{padding:0;margin-top:16px;font-size:1em;font-style:italic;font-weight:bold}html body dl dd{padding:0 16px;margin-bottom:16px}html body code{font-family:Menlo,Monaco,Consolas,'Courier New',monospace;font-size:.85em !important;color:#000;background-color:#f0f0f0;border-radius:3px;padding:.2em 0}html body code::before,html body code::after{letter-spacing:-0.2em;content:"\00a0"}html body pre>code{padding:0;margin:0;font-size:.85em !important;word-break:normal;white-space:pre;background:transparent;border:0}html body .highlight{margin-bottom:16px}html body .highlight pre,html body pre{padding:1em;overflow:auto;font-size:.85em !important;line-height:1.45;border:#d6d6d6;border-radius:3px}html body .highlight pre{margin-bottom:0;word-break:normal}html body pre code,html body pre tt{display:inline;max-width:initial;padding:0;margin:0;overflow:initial;line-height:inherit;word-wrap:normal;background-color:transparent;border:0}html body pre code:before,html body pre tt:before,html body pre code:after,html body pre tt:after{content:normal}html body p,html body blockquote,html body ul,html body ol,html body dl,html body pre{margin-top:0;margin-bottom:16px}html body kbd{color:#000;border:1px solid #d6d6d6;border-bottom:2px solid #c7c7c7;padding:2px 4px;background-color:#f0f0f0;border-radius:3px}@media print{html body{background-color:#fff}html body h1,html body h2,html body h3,html body h4,html body h5,html body h6{color:#000;page-break-after:avoid}html body blockquote{color:#5c5c5c}html body pre{page-break-inside:avoid}html body table{display:table}html body img{display:block;max-width:100%;max-height:100%}html body pre,html body code{word-wrap:break-word;white-space:pre}}.markdown-preview{width:100%;height:100%;box-sizing:border-box}.markdown-preview .pagebreak,.markdown-preview .newpage{page-break-before:always}.markdown-preview pre.line-numbers{position:relative;padding-left:3.8em;counter-reset:linenumber}.markdown-preview pre.line-numbers>code{position:relative}.markdown-preview pre.line-numbers .line-numbers-rows{position:absolute;pointer-events:none;top:1em;font-size:100%;left:0;width:3em;letter-spacing:-1px;border-right:1px solid #999;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none}.markdown-preview pre.line-numbers .line-numbers-rows>span{pointer-events:none;display:block;counter-increment:linenumber}.markdown-preview pre.line-numbers .line-numbers-rows>span:before{content:counter(linenumber);color:#999;display:block;padding-right:.8em;text-align:right}.markdown-preview .mathjax-exps .MathJax_Display{text-align:center !important}.markdown-preview:not([for="preview"]) .code-chunk .btn-group{display:none}.markdown-preview:not([for="preview"]) .code-chunk .status{display:none}.markdown-preview:not([for="preview"]) .code-chunk .output-div{margin-bottom:16px}.scrollbar-style::-webkit-scrollbar{width:8px}.scrollbar-style::-webkit-scrollbar-track{border-radius:10px;background-color:transparent}.scrollbar-style::-webkit-scrollbar-thumb{border-radius:5px;background-color:rgba(150,150,150,0.66);border:4px solid rgba(150,150,150,0.66);background-clip:content-box}html body[for="html-export"]:not([data-presentation-mode]){position:relative;width:100%;height:100%;top:0;left:0;margin:0;padding:0;overflow:auto}html body[for="html-export"]:not([data-presentation-mode]) .markdown-preview{position:relative;top:0}@media screen and (min-width:914px){html body[for="html-export"]:not([data-presentation-mode]) .markdown-preview{padding:2em calc(50% - 457px)}}@media screen and (max-width:914px){html body[for="html-export"]:not([data-presentation-mode]) .markdown-preview{padding:2em}}@media screen and (max-width:450px){html body[for="html-export"]:not([data-presentation-mode]) .markdown-preview{font-size:14px !important;padding:1em}}@media print{html body[for="html-export"]:not([data-presentation-mode]) #sidebar-toc-btn{display:none}}html body[for="html-export"]:not([data-presentation-mode]) #sidebar-toc-btn{position:fixed;bottom:8px;left:8px;font-size:28px;cursor:pointer;color:inherit;z-index:99;width:32px;text-align:center;opacity:.4}html body[for="html-export"]:not([data-presentation-mode])[html-show-sidebar-toc] #sidebar-toc-btn{opacity:1}html body[for="html-export"]:not([data-presentation-mode])[html-show-sidebar-toc] .md-sidebar-toc{position:fixed;top:0;left:0;width:300px;height:100%;padding:32px 0 48px 0;font-size:14px;box-shadow:0 0 4px rgba(150,150,150,0.33);box-sizing:border-box;overflow:auto;background-color:inherit}html body[for="html-export"]:not([data-presentation-mode])[html-show-sidebar-toc] .md-sidebar-toc::-webkit-scrollbar{width:8px}html body[for="html-export"]:not([data-presentation-mode])[html-show-sidebar-toc] .md-sidebar-toc::-webkit-scrollbar-track{border-radius:10px;background-color:transparent}html body[for="html-export"]:not([data-presentation-mode])[html-show-sidebar-toc] .md-sidebar-toc::-webkit-scrollbar-thumb{border-radius:5px;background-color:rgba(150,150,150,0.66);border:4px solid rgba(150,150,150,0.66);background-clip:content-box}html body[for="html-export"]:not([data-presentation-mode])[html-show-sidebar-toc] .md-sidebar-toc a{text-decoration:none}html body[for="html-export"]:not([data-presentation-mode])[html-show-sidebar-toc] .md-sidebar-toc ul{padding:0 1.6em;margin-top:.8em}html body[for="html-export"]:not([data-presentation-mode])[html-show-sidebar-toc] .md-sidebar-toc li{margin-bottom:.8em}html body[for="html-export"]:not([data-presentation-mode])[html-show-sidebar-toc] .md-sidebar-toc ul{list-style-type:none}html body[for="html-export"]:not([data-presentation-mode])[html-show-sidebar-toc] .markdown-preview{left:300px;width:calc(100% -  300px);padding:2em calc(50% - 457px -  150px);margin:0;box-sizing:border-box}@media screen and (max-width:1274px){html body[for="html-export"]:not([data-presentation-mode])[html-show-sidebar-toc] .markdown-preview{padding:2em}}@media screen and (max-width:450px){html body[for="html-export"]:not([data-presentation-mode])[html-show-sidebar-toc] .markdown-preview{width:100%}}html body[for="html-export"]:not([data-presentation-mode]):not([html-show-sidebar-toc]) .markdown-preview{left:50%;transform:translateX(-50%)}html body[for="html-export"]:not([data-presentation-mode]):not([html-show-sidebar-toc]) .md-sidebar-toc{display:none}
/* Please visit the URL below for more information: */
/*   https://shd101wyy.github.io/markdown-preview-enhanced/#/customize-css */
 
      </style>
    </head>
    <body for="html-export">
      <div class="mume markdown-preview   ">
      <h1>Yhelper: FAKE Review Detection &amp; Applications</h1>
<p>(C) 2019 Wang Huaqiang (A0196556M) &amp; Lee Sze Wei (A0180783X)</p>
<hr>
<ul>
<li><a href="file:///C:/Users/AW/AppData/Local/Temp/mume2019315-16924-g8bxuf.zb4mu.html#1-description">1. Description</a></li>
<li><a href="file:///C:/Users/AW/AppData/Local/Temp/mume2019315-16924-g8bxuf.zb4mu.html#2-technology-used">2. Technology Used</a></li>
<li><a href="file:///C:/Users/AW/AppData/Local/Temp/mume2019315-16924-g8bxuf.zb4mu.html#3-dataset">3. Dataset</a></li>
<li><a href="file:///C:/Users/AW/AppData/Local/Temp/mume2019315-16924-g8bxuf.zb4mu.html#4-targeted-audience">4. Targeted audience</a></li>
<li><a href="file:///C:/Users/AW/AppData/Local/Temp/mume2019315-16924-g8bxuf.zb4mu.html#5-usage">5. Usage</a>
<ul>
<li><a href="file:///C:/Users/AW/AppData/Local/Temp/mume2019315-16924-g8bxuf.zb4mu.html#51-train-and-evaluate-model">5.1. Train and evaluate model</a></li>
<li><a href="file:///C:/Users/AW/AppData/Local/Temp/mume2019315-16924-g8bxuf.zb4mu.html#52-website">5.2. Website</a></li>
<li><a href="file:///C:/Users/AW/AppData/Local/Temp/mume2019315-16924-g8bxuf.zb4mu.html#53-browser-extension-live-demo">5.3. Browser Extension (Live demo)</a>
<ul>
<li><a href="file:///C:/Users/AW/AppData/Local/Temp/mume2019315-16924-g8bxuf.zb4mu.html#531-usage">5.3.1. Usage</a>
<ul>
<li><a href="file:///C:/Users/AW/AppData/Local/Temp/mume2019315-16924-g8bxuf.zb4mu.html#5311-server-side">5.3.1.1. Server Side</a></li>
<li><a href="file:///C:/Users/AW/AppData/Local/Temp/mume2019315-16924-g8bxuf.zb4mu.html#5312-client-side">5.3.1.2. Client Side</a></li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
<li><a href="file:///C:/Users/AW/AppData/Local/Temp/mume2019315-16924-g8bxuf.zb4mu.html#6-program-structure">6. Program Structure</a>
<ul>
<li><a href="file:///C:/Users/AW/AppData/Local/Temp/mume2019315-16924-g8bxuf.zb4mu.html#61-training-and-predicting">6.1. Training and predicting</a></li>
<li><a href="file:///C:/Users/AW/AppData/Local/Temp/mume2019315-16924-g8bxuf.zb4mu.html#62-the-whole-project">6.2. The whole project</a></li>
<li><a href="file:///C:/Users/AW/AppData/Local/Temp/mume2019315-16924-g8bxuf.zb4mu.html#63-modules-explanation">6.3. Modules Explanation</a></li>
</ul>
</li>
<li><a href="file:///C:/Users/AW/AppData/Local/Temp/mume2019315-16924-g8bxuf.zb4mu.html#7-details-of-classifier">7. Details of Classifier</a>
<ul>
<li><a href="file:///C:/Users/AW/AppData/Local/Temp/mume2019315-16924-g8bxuf.zb4mu.html#71-core-classifier">7.1. Core classifier</a></li>
<li><a href="file:///C:/Users/AW/AppData/Local/Temp/mume2019315-16924-g8bxuf.zb4mu.html#72-notations">7.2. Notations</a></li>
<li><a href="file:///C:/Users/AW/AppData/Local/Temp/mume2019315-16924-g8bxuf.zb4mu.html#73-full-features-list">7.3. Full features list</a></li>
<li><a href="file:///C:/Users/AW/AppData/Local/Temp/mume2019315-16924-g8bxuf.zb4mu.html#74-training-procedure">7.4. Training Procedure</a>
<ul>
<li><a href="file:///C:/Users/AW/AppData/Local/Temp/mume2019315-16924-g8bxuf.zb4mu.html#741-parameter-tune">7.4.1. Parameter Tune</a></li>
<li><a href="file:///C:/Users/AW/AppData/Local/Temp/mume2019315-16924-g8bxuf.zb4mu.html#742-training">7.4.2. Training</a></li>
<li><a href="file:///C:/Users/AW/AppData/Local/Temp/mume2019315-16924-g8bxuf.zb4mu.html#743-combine-results-from-different-regressors-ensemble-learning-stacking">7.4.3. Combine Results From Different Regressors (Ensemble Learning: Stacking)</a></li>
</ul>
</li>
<li><a href="file:///C:/Users/AW/AppData/Local/Temp/mume2019315-16924-g8bxuf.zb4mu.html#75-testing-procedure">7.5. Testing Procedure</a></li>
</ul>
</li>
<li><a href="file:///C:/Users/AW/AppData/Local/Temp/mume2019315-16924-g8bxuf.zb4mu.html#8-classification-results">8. Classification Results</a>
<ul>
<li><a href="file:///C:/Users/AW/AppData/Local/Temp/mume2019315-16924-g8bxuf.zb4mu.html#81-comparison-of-different-features-and-models">8.1. Comparison of different features and models</a></li>
</ul>
</li>
<li><a href="file:///C:/Users/AW/AppData/Local/Temp/mume2019315-16924-g8bxuf.zb4mu.html#9-result-analyze">9. Result analyze</a>
<ul>
<li><a href="file:///C:/Users/AW/AppData/Local/Temp/mume2019315-16924-g8bxuf.zb4mu.html#91-text-feature-is-not-powerful">9.1. Text Feature is not powerful</a></li>
<li><a href="file:///C:/Users/AW/AppData/Local/Temp/mume2019315-16924-g8bxuf.zb4mu.html#92-rf-important-feature-for-real-reviews">9.2. RF: Important feature for real reviews</a></li>
</ul>
</li>
<li><a href="file:///C:/Users/AW/AppData/Local/Temp/mume2019315-16924-g8bxuf.zb4mu.html#10-further-improvement">10. Further improvement</a>
<ul>
<li><a href="file:///C:/Users/AW/AppData/Local/Temp/mume2019315-16924-g8bxuf.zb4mu.html#101-user-graph">10.1. User graph.</a></li>
<li><a href="file:///C:/Users/AW/AppData/Local/Temp/mume2019315-16924-g8bxuf.zb4mu.html#102-bi-gram-n-gram-model">10.2. bi-gram / n-gram model</a></li>
<li><a href="file:///C:/Users/AW/AppData/Local/Temp/mume2019315-16924-g8bxuf.zb4mu.html#103-nn">10.3. NN</a></li>
</ul>
</li>
<li><a href="file:///C:/Users/AW/AppData/Local/Temp/mume2019315-16924-g8bxuf.zb4mu.html#11-reference">11. Reference</a></li>
</ul>
<hr>
<h1 class="mume-header" id="1-description">1. Description</h1>

<p>According to statistics1, 86% of customers read reviews for businesses; positive reviews tend to encourage 65% of customers to use a business while as much as 40% of negative reviews will stop customers from using a business. This indicates the importance of reviews for businesses. However, increasingly, fake reviews have become prevalent. Fake positive reviews could mislead customers into making a purchase with an undeserving business while negative fake reviews could unfairly damage a business' reputations which in turn leads to negative financial impact to the business.</p>
<p>This project aims to detect fake reviews on Yelp from sentiment features and user's social features. The form of this application will be a browser extension. When users browse reviews and grades on Yelp, the extension will point out potential fake reviews.</p>
<p>After enabling this extension on your web browser, the Yelp website will be like this:</p>
<p><img src="file:///F:/workpath/SocialMediaProgramming/Yhelper/assets/yhelper.png" alt="yhelper"></p>
<hr>
<h1 class="mume-header" id="2-technology-used">2. Technology Used</h1>

<ul>
<li>Sentiment analysis.</li>
<li>Fake user detection.</li>
<li>Profile level behavioral analysis.</li>
</ul>
<hr>
<h1 class="mume-header" id="3-dataset">3. Dataset</h1>

<p>The dataset consists of Yelp hotel database holding the below tables:</p>
<ul>
<li>i.	Hotel
<ul>
<li>This table contains the list of hotel establishments in Yelp</li>
</ul>
</li>
<li>ii.	Review
<ul>
<li>This table contains 5858 reviews submitted to Yelp between Jan 2011 and Sep 2012.  The column</li>
</ul>
</li>
<li>iii.	Reviewer
<ul>
<li>This table contains the features of the reviewers who have submitted reviews to Yelp.</li>
</ul>
</li>
</ul>
<hr>
<h1 class="mume-header" id="4-targeted-audience">4. Targeted audience</h1>

<p>This application has 2 target groups:</p>
<ol>
<li>Potential customers who are interesting to use book the hotels listed</li>
<li>Hotel management who are concerned about fake negative reviews submitted on their hotels, which has possibly led to loss of potential business</li>
</ol>
<hr>
<h1 class="mume-header" id="5-usage">5. Usage</h1>

<h2 class="mume-header" id="51-train-and-evaluate-model">5.1. Train and evaluate model</h2>

<p>The local version requires <code>python2.7</code> with <code>sklearn</code>, <code>xgb</code>, and <code>nltk</code>. To run the chrome extension and the website, a web framework <code>flask</code> is also needed. You can install them via pip.</p>
<pre data-role="codeBlock" data-info="" class="language-"><code>pip install sklearn
pip install xgboost
pip install nltk
pip install flask
</code></pre><p>To do preprocess, run:</p>
<pre data-role="codeBlock" data-info="" class="language-"><code>python preprocess_db.py
python preprocess_review.py
</code></pre><p>Warning: <code>preprocess_review.py</code> will take a long time to finish.</p>
<p>To train classifier, run:</p>
<pre data-role="codeBlock" data-info="" class="language-"><code>python classifier.py
</code></pre><p>The trained model will be saved in <code>model1.data</code>, <code>model2.data</code> and <code>tfidf-model.data</code> in <code>data</code> folder.</p>
<p>To detect fake reviews from a yelp page, call (in python):</p>
<pre data-role="codeBlock" data-info="py" class="language-python"><span class="token keyword">import</span> pageparser
pageparser<span class="token punctuation">.</span>detect_fake_review<span class="token punctuation">(</span>url<span class="token punctuation">)</span>
</pre><p>To call pre-trained classifier, call (in python):</p>
<pre data-role="codeBlock" data-info="py" class="language-python"><span class="token keyword">import</span> classifier
classifier<span class="token punctuation">.</span>load_model<span class="token punctuation">(</span><span class="token punctuation">)</span>
classify_result<span class="token operator">=</span>classifier<span class="token punctuation">.</span>check<span class="token punctuation">(</span>reviews<span class="token punctuation">)</span>
<span class="token comment"># see classifier.py for the structure of `reviews`</span>
</pre><p>You can run:</p>
<pre data-role="codeBlock" data-info="" class="language-"><code>python pageparser.py
</code></pre><p>To run a built-in fake reviews detection unit test.</p>
<p>For debug: the result will be saved in:</p>
<pre data-role="codeBlock" data-info="" class="language-"><code>./data/preprocessed/yelppage.json
./data/preprocessed/new_yelppage.htm
</code></pre><h2 class="mume-header" id="52-website">5.2. Website</h2>

<p>TBD</p>
<h2 class="mume-header" id="53-browser-extension-live-demo">5.3. Browser Extension (Live demo)</h2>

<p>The extension is consisted of two parts: the Chrome extension client side and the python flask server side. The client side will collect info (such as url) when user are browsing yelp and send them to the server side. The server side will do query based on the data from client side, and return the prediction result. Then the client will update the website (point out which review is a potential fake review) according to the server's prediction.</p>
<p>In real world, this extension should query result from server database, and will use Ajax to update webpage dynamically. But for simplify, the server will now crawl data and run classifier when received a query request, and the chrome extension (client) will then update (replace, in fact) the yelp page.</p>
<p>Now the server will be setup at <code>Localhost:5000</code>.</p>
<h3 class="mume-header" id="531-usage">5.3.1. Usage</h3>

<h4 class="mume-header" id="5311-server-side">5.3.1.1. Server Side</h4>

<pre data-role="codeBlock" data-info="py" class="language-python"><span class="token comment"># in python 2.7 environment, run:</span>
python server<span class="token punctuation">.</span>py
</pre><p>The server will output the result in stdout when receiving requests from the extension.</p>
<h4 class="mume-header" id="5312-client-side">5.3.1.2. Client Side</h4>

<pre data-role="codeBlock" data-info="" class="language-"><code># input the following URL in Chrome's multifunction bar.
chrome://extensions/

# enable developer mode
# `Load Unpacked`
# choose directory: `......\Yhelper\extension`

# This extension is only available when you are visiting yelp detail page. 
# Click the extension icon and click run script button. 
# It will take some time for the server to crawl and run the classifier.
</code></pre><hr>
<h1 class="mume-header" id="6-program-structure">6. Program Structure</h1>

<h2 class="mume-header" id="61-training-and-predicting">6.1. Training and predicting</h2>

<div class="mermaid" data-processed="true"><svg id="mermaid-1555322227726" width="100%" xmlns="http://www.w3.org/2000/svg" style="max-width: 951.609375px;" viewBox="0 0 951.609375 516"><style>#mermaid-1555322227726 .label{font-family:'trebuchet ms', verdana, arial;color:#333}#mermaid-1555322227726 .node rect,#mermaid-1555322227726 .node circle,#mermaid-1555322227726 .node ellipse,#mermaid-1555322227726 .node polygon{fill:#cde498;stroke:#13540c;stroke-width:1px}#mermaid-1555322227726 .node.clickable{cursor:pointer}#mermaid-1555322227726 .arrowheadPath{fill:green}#mermaid-1555322227726 .edgePath .path{stroke:green;stroke-width:1.5px}#mermaid-1555322227726 .edgeLabel{background-color:#e8e8e8}#mermaid-1555322227726 .cluster rect{fill:#cdffb2 !important;stroke:#6eaa49 !important;stroke-width:1px !important}#mermaid-1555322227726 .cluster text{fill:#333}#mermaid-1555322227726 div.mermaidTooltip{position:absolute;text-align:center;max-width:200px;padding:2px;font-family:'trebuchet ms', verdana, arial;font-size:12px;background:#cdffb2;border:1px solid #6eaa49;border-radius:2px;pointer-events:none;z-index:100}#mermaid-1555322227726 .actor{stroke:#13540c;fill:#cde498}#mermaid-1555322227726 text.actor{fill:#000;stroke:none}#mermaid-1555322227726 .actor-line{stroke:grey}#mermaid-1555322227726 .messageLine0{stroke-width:1.5;stroke-dasharray:'2 2';stroke:#333}#mermaid-1555322227726 .messageLine1{stroke-width:1.5;stroke-dasharray:'2 2';stroke:#333}#mermaid-1555322227726 #arrowhead{fill:#333}#mermaid-1555322227726 #crosshead path{fill:#333 !important;stroke:#333 !important}#mermaid-1555322227726 .messageText{fill:#333;stroke:none}#mermaid-1555322227726 .labelBox{stroke:#326932;fill:#cde498}#mermaid-1555322227726 .labelText{fill:#000;stroke:none}#mermaid-1555322227726 .loopText{fill:#000;stroke:none}#mermaid-1555322227726 .loopLine{stroke-width:2;stroke-dasharray:'2 2';stroke:#326932}#mermaid-1555322227726 .note{stroke:#6eaa49;fill:#fff5ad}#mermaid-1555322227726 .noteText{fill:black;stroke:none;font-family:'trebuchet ms', verdana, arial;font-size:14px}#mermaid-1555322227726 .activation0{fill:#f4f4f4;stroke:#666}#mermaid-1555322227726 .activation1{fill:#f4f4f4;stroke:#666}#mermaid-1555322227726 .activation2{fill:#f4f4f4;stroke:#666}#mermaid-1555322227726 .section{stroke:none;opacity:0.2}#mermaid-1555322227726 .section0{fill:#6eaa49}#mermaid-1555322227726 .section2{fill:#6eaa49}#mermaid-1555322227726 .section1,#mermaid-1555322227726 .section3{fill:#fff;opacity:0.2}#mermaid-1555322227726 .sectionTitle0{fill:#333}#mermaid-1555322227726 .sectionTitle1{fill:#333}#mermaid-1555322227726 .sectionTitle2{fill:#333}#mermaid-1555322227726 .sectionTitle3{fill:#333}#mermaid-1555322227726 .sectionTitle{text-anchor:start;font-size:11px;text-height:14px}#mermaid-1555322227726 .grid .tick{stroke:#d3d3d3;opacity:0.3;shape-rendering:crispEdges}#mermaid-1555322227726 .grid path{stroke-width:0}#mermaid-1555322227726 .today{fill:none;stroke:red;stroke-width:2px}#mermaid-1555322227726 .task{stroke-width:2}#mermaid-1555322227726 .taskText{text-anchor:middle;font-size:11px}#mermaid-1555322227726 .taskTextOutsideRight{fill:#000;text-anchor:start;font-size:11px}#mermaid-1555322227726 .taskTextOutsideLeft{fill:#000;text-anchor:end;font-size:11px}#mermaid-1555322227726 .taskText0,#mermaid-1555322227726 .taskText1,#mermaid-1555322227726 .taskText2,#mermaid-1555322227726 .taskText3{fill:#fff}#mermaid-1555322227726 .task0,#mermaid-1555322227726 .task1,#mermaid-1555322227726 .task2,#mermaid-1555322227726 .task3{fill:#487e3a;stroke:#13540c}#mermaid-1555322227726 .taskTextOutside0,#mermaid-1555322227726 .taskTextOutside2{fill:#000}#mermaid-1555322227726 .taskTextOutside1,#mermaid-1555322227726 .taskTextOutside3{fill:#000}#mermaid-1555322227726 .active0,#mermaid-1555322227726 .active1,#mermaid-1555322227726 .active2,#mermaid-1555322227726 .active3{fill:#cde498;stroke:#13540c}#mermaid-1555322227726 .activeText0,#mermaid-1555322227726 .activeText1,#mermaid-1555322227726 .activeText2,#mermaid-1555322227726 .activeText3{fill:#000 !important}#mermaid-1555322227726 .done0,#mermaid-1555322227726 .done1,#mermaid-1555322227726 .done2,#mermaid-1555322227726 .done3{stroke:grey;fill:#d3d3d3;stroke-width:2}#mermaid-1555322227726 .doneText0,#mermaid-1555322227726 .doneText1,#mermaid-1555322227726 .doneText2,#mermaid-1555322227726 .doneText3{fill:#000 !important}#mermaid-1555322227726 .crit0,#mermaid-1555322227726 .crit1,#mermaid-1555322227726 .crit2,#mermaid-1555322227726 .crit3{stroke:#f88;fill:red;stroke-width:2}#mermaid-1555322227726 .activeCrit0,#mermaid-1555322227726 .activeCrit1,#mermaid-1555322227726 .activeCrit2,#mermaid-1555322227726 .activeCrit3{stroke:#f88;fill:#cde498;stroke-width:2}#mermaid-1555322227726 .doneCrit0,#mermaid-1555322227726 .doneCrit1,#mermaid-1555322227726 .doneCrit2,#mermaid-1555322227726 .doneCrit3{stroke:#f88;fill:#d3d3d3;stroke-width:2;cursor:pointer;shape-rendering:crispEdges}#mermaid-1555322227726 .doneCritText0,#mermaid-1555322227726 .doneCritText1,#mermaid-1555322227726 .doneCritText2,#mermaid-1555322227726 .doneCritText3{fill:#000 !important}#mermaid-1555322227726 .activeCritText0,#mermaid-1555322227726 .activeCritText1,#mermaid-1555322227726 .activeCritText2,#mermaid-1555322227726 .activeCritText3{fill:#000 !important}#mermaid-1555322227726 .titleText{text-anchor:middle;font-size:18px;fill:#000}#mermaid-1555322227726 g.classGroup text{fill:#13540c;stroke:none;font-family:'trebuchet ms', verdana, arial;font-size:10px}#mermaid-1555322227726 g.classGroup rect{fill:#cde498;stroke:#13540c}#mermaid-1555322227726 g.classGroup line{stroke:#13540c;stroke-width:1}#mermaid-1555322227726 .classLabel .box{stroke:none;stroke-width:0;fill:#cde498;opacity:0.5}#mermaid-1555322227726 .classLabel .label{fill:#13540c;font-size:10px}#mermaid-1555322227726 .relation{stroke:#13540c;stroke-width:1;fill:none}#mermaid-1555322227726 #compositionStart{fill:#13540c;stroke:#13540c;stroke-width:1}#mermaid-1555322227726 #compositionEnd{fill:#13540c;stroke:#13540c;stroke-width:1}#mermaid-1555322227726 #aggregationStart{fill:#cde498;stroke:#13540c;stroke-width:1}#mermaid-1555322227726 #aggregationEnd{fill:#cde498;stroke:#13540c;stroke-width:1}#mermaid-1555322227726 #dependencyStart{fill:#13540c;stroke:#13540c;stroke-width:1}#mermaid-1555322227726 #dependencyEnd{fill:#13540c;stroke:#13540c;stroke-width:1}#mermaid-1555322227726 #extensionStart{fill:#13540c;stroke:#13540c;stroke-width:1}#mermaid-1555322227726 #extensionEnd{fill:#13540c;stroke:#13540c;stroke-width:1}#mermaid-1555322227726 .commit-id,#mermaid-1555322227726 .commit-msg,#mermaid-1555322227726 .branch-label{fill:lightgrey;color:lightgrey}
</style><style>#mermaid-1555322227726 {
    color: rgb(51, 51, 51);
    font: normal normal 400 normal 16px / 25.6px "Helvetica Neue", Helvetica, "Segoe UI", Arial, freesans, sans-serif;
  }</style><g transform="translate(-12, -12)"><g class="output"><g class="clusters"><g class="cluster" id="subGraph2" transform="translate(888.359375,265)" style="opacity: 1;"><rect width="134.5" height="465" x="-67.25" y="-232.5"></rect><g class="label"><g transform="translate(0,0)"><foreignobject width="0" height="0"><div xmlns="http://www.w3.org/1999/xhtml" style="display: inline-block; white-space: nowrap;"></div></foreignobject></g></g><text x="0" y="-218.5" fill="black" stroke="none" id="mermaid-1555322227726Text" style="text-anchor: middle;">classifier</text></g><g class="cluster" id="subGraph1" transform="translate(376.09375,400)" style="opacity: 1;"><rect width="712.1875" height="240" x="-356.09375" y="-120"></rect><g class="label"><g transform="translate(0,0)"><foreignobject width="0" height="0"><div xmlns="http://www.w3.org/1999/xhtml" style="display: inline-block; white-space: nowrap;"></div></foreignobject></g></g><text x="0" y="-106" fill="black" stroke="none" id="mermaid-1555322227726Text" style="text-anchor: middle;">data-crawler</text></g><g class="cluster" id="subGraph0" transform="translate(376.09375,140)" style="opacity: 1;"><rect width="712.1875" height="240" x="-356.09375" y="-120"></rect><g class="label"><g transform="translate(0,0)"><foreignobject width="0" height="0"><div xmlns="http://www.w3.org/1999/xhtml" style="display: inline-block; white-space: nowrap;"></div></foreignobject></g></g><text x="0" y="-106" fill="black" stroke="none" id="mermaid-1555322227726Text" style="text-anchor: middle;">preprocess</text></g></g><g class="edgePaths"><g class="edgePath" style="opacity: 1;"><path class="path" d="M195.421875,124.22664590747331L320.6796875,85L434.609375,85" marker-end="url(#arrowhead1)" style="fill:none"></path><defs><marker id="arrowhead1" viewBox="0 0 10 10" refX="9" refY="5" markerUnits="strokeWidth" markerWidth="8" markerHeight="6" orient="auto"><path d="M 0 0 L 10 5 L 0 10 z" class="arrowheadPath" style="stroke-width: 1; stroke-dasharray: 1, 0;"></path></marker></defs></g><g class="edgePath" style="opacity: 1;"><path class="path" d="M195.421875,155.7733540925267L320.6796875,195L396.25,195" marker-end="url(#arrowhead2)" style="fill:none"></path><defs><marker id="arrowhead2" viewBox="0 0 10 10" refX="9" refY="5" markerUnits="strokeWidth" markerWidth="8" markerHeight="6" orient="auto"><path d="M 0 0 L 10 5 L 0 10 z" class="arrowheadPath" style="stroke-width: 1; stroke-dasharray: 1, 0;"></path></marker></defs></g><g class="edgePath" style="opacity: 1;"><path class="path" d="M240.85014204545456,430L320.6796875,455L464.3203125,455" marker-end="url(#arrowhead3)" style="fill:none"></path><defs><marker id="arrowhead3" viewBox="0 0 10 10" refX="9" refY="5" markerUnits="strokeWidth" markerWidth="8" markerHeight="6" orient="auto"><path d="M 0 0 L 10 5 L 0 10 z" class="arrowheadPath" style="stroke-width: 1; stroke-dasharray: 1, 0;"></path></marker></defs></g><g class="edgePath" style="opacity: 1;"><path class="path" d="M240.85014204545456,370L320.6796875,345L434.609375,345" marker-end="url(#arrowhead4)" style="fill:none"></path><defs><marker id="arrowhead4" viewBox="0 0 10 10" refX="9" refY="5" markerUnits="strokeWidth" markerWidth="8" markerHeight="6" orient="auto"><path d="M 0 0 L 10 5 L 0 10 z" class="arrowheadPath" style="stroke-width: 1; stroke-dasharray: 1, 0;"></path></marker></defs></g><g class="edgePath" style="opacity: 1;"><path class="path" d="M668.828125,345L732.1875,345L776.6484375,345L821.109375,345L851.6775568181819,370" marker-end="url(#arrowhead5)" style="fill:none"></path><defs><marker id="arrowhead5" viewBox="0 0 10 10" refX="9" refY="5" markerUnits="strokeWidth" markerWidth="8" markerHeight="6" orient="auto"><path d="M 0 0 L 10 5 L 0 10 z" class="arrowheadPath" style="stroke-width: 1; stroke-dasharray: 1, 0;"></path></marker></defs></g><g class="edgePath" style="opacity: 1;"><path class="path" d="M639.1171875,455L732.1875,455L776.6484375,455L821.109375,455L851.6775568181819,430" marker-end="url(#arrowhead6)" style="fill:none"></path><defs><marker id="arrowhead6" viewBox="0 0 10 10" refX="9" refY="5" markerUnits="strokeWidth" markerWidth="8" markerHeight="6" orient="auto"><path d="M 0 0 L 10 5 L 0 10 z" class="arrowheadPath" style="stroke-width: 1; stroke-dasharray: 1, 0;"></path></marker></defs></g><g class="edgePath" style="opacity: 1;"><path class="path" d="M668.828125,85L732.1875,85L776.6484375,85L821.109375,85L856.9375,114.301812267658" marker-end="url(#arrowhead7)" style="fill:none"></path><defs><marker id="arrowhead7" viewBox="0 0 10 10" refX="9" refY="5" markerUnits="strokeWidth" markerWidth="8" markerHeight="6" orient="auto"><path d="M 0 0 L 10 5 L 0 10 z" class="arrowheadPath" style="stroke-width: 1; stroke-dasharray: 1, 0;"></path></marker></defs></g><g class="edgePath" style="opacity: 1;"><path class="path" d="M707.1875,195L732.1875,195L776.6484375,195L821.109375,195L856.9375,165.698187732342" marker-end="url(#arrowhead8)" style="fill:none"></path><defs><marker id="arrowhead8" viewBox="0 0 10 10" refX="9" refY="5" markerUnits="strokeWidth" markerWidth="8" markerHeight="6" orient="auto"><path d="M 0 0 L 10 5 L 0 10 z" class="arrowheadPath" style="stroke-width: 1; stroke-dasharray: 1, 0;"></path></marker></defs></g></g><g class="edgeLabels"><g class="edgeLabel" transform="" style="opacity: 1;"><g transform="translate(0,0)" class="label"><foreignobject width="0" height="0"><div xmlns="http://www.w3.org/1999/xhtml" style="display: inline-block; white-space: nowrap;"><span class="edgeLabel"></span></div></foreignobject></g></g><g class="edgeLabel" transform="" style="opacity: 1;"><g transform="translate(0,0)" class="label"><foreignobject width="0" height="0"><div xmlns="http://www.w3.org/1999/xhtml" style="display: inline-block; white-space: nowrap;"><span class="edgeLabel"></span></div></foreignobject></g></g><g class="edgeLabel" transform="translate(320.6796875,455)" style="opacity: 1;"><g transform="translate(-32.8125,-20)" class="label"><foreignobject width="65.625" height="40"><div xmlns="http://www.w3.org/1999/xhtml" style="display: inline-block; white-space: nowrap;"><span class="edgeLabel">get_uid</span></div></foreignobject></g></g><g class="edgeLabel" transform="translate(320.6796875,345)" style="opacity: 1;"><g transform="translate(-50.5703125,-20)" class="label"><foreignobject width="101.15234375" height="40"><div xmlns="http://www.w3.org/1999/xhtml" style="display: inline-block; white-space: nowrap;"><span class="edgeLabel">review_text</span></div></foreignobject></g></g><g class="edgeLabel" transform="translate(776.6484375,345)" style="opacity: 1;"><g transform="translate(-19.4609375,-20)" class="label"><foreignobject width="38.92578125" height="40"><div xmlns="http://www.w3.org/1999/xhtml" style="display: inline-block; white-space: nowrap;"><span class="edgeLabel">data</span></div></foreignobject></g></g><g class="edgeLabel" transform="translate(776.6484375,455)" style="opacity: 1;"><g transform="translate(-19.4609375,-20)" class="label"><foreignobject width="38.92578125" height="40"><div xmlns="http://www.w3.org/1999/xhtml" style="display: inline-block; white-space: nowrap;"><span class="edgeLabel">data</span></div></foreignobject></g></g><g class="edgeLabel" transform="translate(776.6484375,85)" style="opacity: 1;"><g transform="translate(-19.4609375,-20)" class="label"><foreignobject width="38.92578125" height="40"><div xmlns="http://www.w3.org/1999/xhtml" style="display: inline-block; white-space: nowrap;"><span class="edgeLabel">data</span></div></foreignobject></g></g><g class="edgeLabel" transform="translate(776.6484375,195)" style="opacity: 1;"><g transform="translate(-19.4609375,-20)" class="label"><foreignobject width="38.92578125" height="40"><div xmlns="http://www.w3.org/1999/xhtml" style="display: inline-block; white-space: nowrap;"><span class="edgeLabel">data</span></div></foreignobject></g></g></g><g class="nodes"><g class="node" id="2" transform="translate(551.71875,345)" style="opacity: 1;"><rect rx="5" ry="5" x="-117.109375" y="-30" width="234.21875" height="60"></rect><g class="label" transform="translate(0,0)"><g transform="translate(-107.109375,-20)"><foreignobject width="214.21875" height="40"><div xmlns="http://www.w3.org/1999/xhtml" style="display: inline-block; white-space: nowrap;">review_text_preprocess</div></foreignobject></g></g></g><g class="node" id="train" transform="translate(888.359375,140)" style="opacity: 1;"><rect rx="0" ry="0" x="-31.421875" y="-30" width="62.84375" height="60"></rect><g class="label" transform="translate(0,0)"><g transform="translate(-21.421875,-20)"><foreignobject width="42.8515625" height="40"><div xmlns="http://www.w3.org/1999/xhtml" style="display: inline-block; white-space: nowrap;">train</div></foreignobject></g></g></g><g class="node" id="predict" transform="translate(888.359375,400)" style="opacity: 1;"><rect rx="0" ry="0" x="-42.25" y="-30" width="84.5" height="60"></rect><g class="label" transform="translate(0,0)"><g transform="translate(-32.25,-20)"><foreignobject width="64.51171875" height="40"><div xmlns="http://www.w3.org/1999/xhtml" style="display: inline-block; white-space: nowrap;">predict</div></foreignobject></g></g></g><g class="node" id="yelp-review-crawler" transform="translate(145.0546875,400)" style="opacity: 1;"><rect rx="0" ry="0" x="-100.0546875" y="-30" width="200.109375" height="60"></rect><g class="label" transform="translate(0,0)"><g transform="translate(-90.0546875,-20)"><foreignobject width="180.1171875" height="40"><div xmlns="http://www.w3.org/1999/xhtml" style="display: inline-block; white-space: nowrap;">yelp-review-crawler</div></foreignobject></g></g></g><g class="node" id="user-info-crawler" transform="translate(551.71875,455)" style="opacity: 1;"><rect rx="0" ry="0" x="-87.3984375" y="-30" width="174.796875" height="60"></rect><g class="label" transform="translate(0,0)"><g transform="translate(-77.3984375,-20)"><foreignobject width="154.8046875" height="40"><div xmlns="http://www.w3.org/1999/xhtml" style="display: inline-block; white-space: nowrap;">user-info-crawler</div></foreignobject></g></g></g><g class="node" id="database" transform="translate(145.0546875,140)" style="opacity: 1;"><rect rx="0" ry="0" x="-50.3671875" y="-30" width="100.734375" height="60"></rect><g class="label" transform="translate(0,0)"><g transform="translate(-40.3671875,-20)"><foreignobject width="80.7421875" height="40"><div xmlns="http://www.w3.org/1999/xhtml" style="display: inline-block; white-space: nowrap;">database</div></foreignobject></g></g></g><g class="node" id="review_text_preprocess" transform="translate(551.71875,85)" style="opacity: 1;"><rect rx="0" ry="0" x="-117.109375" y="-30" width="234.21875" height="60"></rect><g class="label" transform="translate(0,0)"><g transform="translate(-107.109375,-20)"><foreignobject width="214.21875" height="40"><div xmlns="http://www.w3.org/1999/xhtml" style="display: inline-block; white-space: nowrap;">review_text_preprocess</div></foreignobject></g></g></g><g class="node" id="user_social_features_preprocess" transform="translate(551.71875,195)" style="opacity: 1;"><rect rx="0" ry="0" x="-155.46875" y="-30" width="310.9375" height="60"></rect><g class="label" transform="translate(0,0)"><g transform="translate(-145.46875,-20)"><foreignobject width="290.9375" height="40"><div xmlns="http://www.w3.org/1999/xhtml" style="display: inline-block; white-space: nowrap;">user_social_features_preprocess</div></foreignobject></g></g></g></g></g></g></svg></div><p>When in training model, the classifier will load marked reviews, and then using the reviews' uid and review ID to search the Yelp open database, get the social feature (and other features) from the database.</p>
<p>The classifier can run in different places. It can be called in the server end of the Chrome extension, or be called by the website server. In either of thw two ways, the classifier will need preprocessor to help it to get the features it needs.</p>
<h2 class="mume-header" id="62-the-whole-project">6.2. The whole project</h2>

<div class="mermaid" data-processed="true"><svg id="mermaid-1555322228257" width="100%" xmlns="http://www.w3.org/2000/svg" style="max-width: 1433.765625px;" viewBox="0 0 1433.765625 541"><style>#mermaid-1555322228257 .label{font-family:'trebuchet ms', verdana, arial;color:#333}#mermaid-1555322228257 .node rect,#mermaid-1555322228257 .node circle,#mermaid-1555322228257 .node ellipse,#mermaid-1555322228257 .node polygon{fill:#cde498;stroke:#13540c;stroke-width:1px}#mermaid-1555322228257 .node.clickable{cursor:pointer}#mermaid-1555322228257 .arrowheadPath{fill:green}#mermaid-1555322228257 .edgePath .path{stroke:green;stroke-width:1.5px}#mermaid-1555322228257 .edgeLabel{background-color:#e8e8e8}#mermaid-1555322228257 .cluster rect{fill:#cdffb2 !important;stroke:#6eaa49 !important;stroke-width:1px !important}#mermaid-1555322228257 .cluster text{fill:#333}#mermaid-1555322228257 div.mermaidTooltip{position:absolute;text-align:center;max-width:200px;padding:2px;font-family:'trebuchet ms', verdana, arial;font-size:12px;background:#cdffb2;border:1px solid #6eaa49;border-radius:2px;pointer-events:none;z-index:100}#mermaid-1555322228257 .actor{stroke:#13540c;fill:#cde498}#mermaid-1555322228257 text.actor{fill:#000;stroke:none}#mermaid-1555322228257 .actor-line{stroke:grey}#mermaid-1555322228257 .messageLine0{stroke-width:1.5;stroke-dasharray:'2 2';stroke:#333}#mermaid-1555322228257 .messageLine1{stroke-width:1.5;stroke-dasharray:'2 2';stroke:#333}#mermaid-1555322228257 #arrowhead{fill:#333}#mermaid-1555322228257 #crosshead path{fill:#333 !important;stroke:#333 !important}#mermaid-1555322228257 .messageText{fill:#333;stroke:none}#mermaid-1555322228257 .labelBox{stroke:#326932;fill:#cde498}#mermaid-1555322228257 .labelText{fill:#000;stroke:none}#mermaid-1555322228257 .loopText{fill:#000;stroke:none}#mermaid-1555322228257 .loopLine{stroke-width:2;stroke-dasharray:'2 2';stroke:#326932}#mermaid-1555322228257 .note{stroke:#6eaa49;fill:#fff5ad}#mermaid-1555322228257 .noteText{fill:black;stroke:none;font-family:'trebuchet ms', verdana, arial;font-size:14px}#mermaid-1555322228257 .activation0{fill:#f4f4f4;stroke:#666}#mermaid-1555322228257 .activation1{fill:#f4f4f4;stroke:#666}#mermaid-1555322228257 .activation2{fill:#f4f4f4;stroke:#666}#mermaid-1555322228257 .section{stroke:none;opacity:0.2}#mermaid-1555322228257 .section0{fill:#6eaa49}#mermaid-1555322228257 .section2{fill:#6eaa49}#mermaid-1555322228257 .section1,#mermaid-1555322228257 .section3{fill:#fff;opacity:0.2}#mermaid-1555322228257 .sectionTitle0{fill:#333}#mermaid-1555322228257 .sectionTitle1{fill:#333}#mermaid-1555322228257 .sectionTitle2{fill:#333}#mermaid-1555322228257 .sectionTitle3{fill:#333}#mermaid-1555322228257 .sectionTitle{text-anchor:start;font-size:11px;text-height:14px}#mermaid-1555322228257 .grid .tick{stroke:#d3d3d3;opacity:0.3;shape-rendering:crispEdges}#mermaid-1555322228257 .grid path{stroke-width:0}#mermaid-1555322228257 .today{fill:none;stroke:red;stroke-width:2px}#mermaid-1555322228257 .task{stroke-width:2}#mermaid-1555322228257 .taskText{text-anchor:middle;font-size:11px}#mermaid-1555322228257 .taskTextOutsideRight{fill:#000;text-anchor:start;font-size:11px}#mermaid-1555322228257 .taskTextOutsideLeft{fill:#000;text-anchor:end;font-size:11px}#mermaid-1555322228257 .taskText0,#mermaid-1555322228257 .taskText1,#mermaid-1555322228257 .taskText2,#mermaid-1555322228257 .taskText3{fill:#fff}#mermaid-1555322228257 .task0,#mermaid-1555322228257 .task1,#mermaid-1555322228257 .task2,#mermaid-1555322228257 .task3{fill:#487e3a;stroke:#13540c}#mermaid-1555322228257 .taskTextOutside0,#mermaid-1555322228257 .taskTextOutside2{fill:#000}#mermaid-1555322228257 .taskTextOutside1,#mermaid-1555322228257 .taskTextOutside3{fill:#000}#mermaid-1555322228257 .active0,#mermaid-1555322228257 .active1,#mermaid-1555322228257 .active2,#mermaid-1555322228257 .active3{fill:#cde498;stroke:#13540c}#mermaid-1555322228257 .activeText0,#mermaid-1555322228257 .activeText1,#mermaid-1555322228257 .activeText2,#mermaid-1555322228257 .activeText3{fill:#000 !important}#mermaid-1555322228257 .done0,#mermaid-1555322228257 .done1,#mermaid-1555322228257 .done2,#mermaid-1555322228257 .done3{stroke:grey;fill:#d3d3d3;stroke-width:2}#mermaid-1555322228257 .doneText0,#mermaid-1555322228257 .doneText1,#mermaid-1555322228257 .doneText2,#mermaid-1555322228257 .doneText3{fill:#000 !important}#mermaid-1555322228257 .crit0,#mermaid-1555322228257 .crit1,#mermaid-1555322228257 .crit2,#mermaid-1555322228257 .crit3{stroke:#f88;fill:red;stroke-width:2}#mermaid-1555322228257 .activeCrit0,#mermaid-1555322228257 .activeCrit1,#mermaid-1555322228257 .activeCrit2,#mermaid-1555322228257 .activeCrit3{stroke:#f88;fill:#cde498;stroke-width:2}#mermaid-1555322228257 .doneCrit0,#mermaid-1555322228257 .doneCrit1,#mermaid-1555322228257 .doneCrit2,#mermaid-1555322228257 .doneCrit3{stroke:#f88;fill:#d3d3d3;stroke-width:2;cursor:pointer;shape-rendering:crispEdges}#mermaid-1555322228257 .doneCritText0,#mermaid-1555322228257 .doneCritText1,#mermaid-1555322228257 .doneCritText2,#mermaid-1555322228257 .doneCritText3{fill:#000 !important}#mermaid-1555322228257 .activeCritText0,#mermaid-1555322228257 .activeCritText1,#mermaid-1555322228257 .activeCritText2,#mermaid-1555322228257 .activeCritText3{fill:#000 !important}#mermaid-1555322228257 .titleText{text-anchor:middle;font-size:18px;fill:#000}#mermaid-1555322228257 g.classGroup text{fill:#13540c;stroke:none;font-family:'trebuchet ms', verdana, arial;font-size:10px}#mermaid-1555322228257 g.classGroup rect{fill:#cde498;stroke:#13540c}#mermaid-1555322228257 g.classGroup line{stroke:#13540c;stroke-width:1}#mermaid-1555322228257 .classLabel .box{stroke:none;stroke-width:0;fill:#cde498;opacity:0.5}#mermaid-1555322228257 .classLabel .label{fill:#13540c;font-size:10px}#mermaid-1555322228257 .relation{stroke:#13540c;stroke-width:1;fill:none}#mermaid-1555322228257 #compositionStart{fill:#13540c;stroke:#13540c;stroke-width:1}#mermaid-1555322228257 #compositionEnd{fill:#13540c;stroke:#13540c;stroke-width:1}#mermaid-1555322228257 #aggregationStart{fill:#cde498;stroke:#13540c;stroke-width:1}#mermaid-1555322228257 #aggregationEnd{fill:#cde498;stroke:#13540c;stroke-width:1}#mermaid-1555322228257 #dependencyStart{fill:#13540c;stroke:#13540c;stroke-width:1}#mermaid-1555322228257 #dependencyEnd{fill:#13540c;stroke:#13540c;stroke-width:1}#mermaid-1555322228257 #extensionStart{fill:#13540c;stroke:#13540c;stroke-width:1}#mermaid-1555322228257 #extensionEnd{fill:#13540c;stroke:#13540c;stroke-width:1}#mermaid-1555322228257 .commit-id,#mermaid-1555322228257 .commit-msg,#mermaid-1555322228257 .branch-label{fill:lightgrey;color:lightgrey}
</style><style>#mermaid-1555322228257 {
    color: rgb(51, 51, 51);
    font: normal normal 400 normal 16px / 25.6px "Helvetica Neue", Helvetica, "Segoe UI", Arial, freesans, sans-serif;
  }</style><g transform="translate(-12, -12)"><g class="output"><g class="clusters"><g class="cluster" id="subGraph3" transform="translate(282.1640625,441.25)" style="opacity: 1;"><rect width="524.328125" height="207.5" x="-262.1640625" y="-103.75"></rect><g class="label"><g transform="translate(0,0)"><foreignobject width="0" height="0"><div xmlns="http://www.w3.org/1999/xhtml" style="display: inline-block; white-space: nowrap;"></div></foreignobject></g></g><text x="0" y="-89.75" fill="black" stroke="none" id="mermaid-1555322228257Text" style="text-anchor: middle;">chrome_ext</text></g><g class="cluster" id="subGraph2" transform="translate(771.359375,122.5)" style="opacity: 1;"><rect width="1011.71875" height="205" x="-505.859375" y="-102.5"></rect><g class="label"><g transform="translate(0,0)"><foreignobject width="0" height="0"><div xmlns="http://www.w3.org/1999/xhtml" style="display: inline-block; white-space: nowrap;"></div></foreignobject></g></g><text x="0" y="-88.5" fill="black" stroke="none" id="mermaid-1555322228257Text" style="text-anchor: middle;">database</text></g><g class="cluster" id="subGraph1" transform="translate(1382.4921875,92.5)" style="opacity: 1;"><rect width="110.546875" height="130" x="-55.2734375" y="-65"></rect><g class="label"><g transform="translate(0,0)"><foreignobject width="0" height="0"><div xmlns="http://www.w3.org/1999/xhtml" style="display: inline-block; white-space: nowrap;"></div></foreignobject></g></g><text x="0" y="-51" fill="black" stroke="none" id="mermaid-1555322228257Text" style="text-anchor: middle;">result_page</text></g><g class="cluster" id="subGraph0" transform="translate(734.0078125,310)" style="opacity: 1;"><rect width="219.328125" height="130" x="-109.6640625" y="-65"></rect><g class="label"><g transform="translate(0,0)"><foreignobject width="0" height="0"><div xmlns="http://www.w3.org/1999/xhtml" style="display: inline-block; white-space: nowrap;"></div></foreignobject></g></g><text x="0" y="-51" fill="black" stroke="none" id="mermaid-1555322228257Text" style="text-anchor: middle;">model_training</text></g></g><g class="edgePaths"><g class="edgePath" style="opacity: 1;"><path class="path" d="M166.59375,413.54910714285717L216.046875,390L265.5,390L346.109375,420.35556178201176" marker-end="url(#arrowhead9)" style="fill:none"></path><defs><marker id="arrowhead9" viewBox="0 0 10 10" refX="9" refY="5" markerUnits="strokeWidth" markerWidth="8" markerHeight="6" orient="auto"><path d="M 0 0 L 10 5 L 0 10 z" class="arrowheadPath" style="stroke-width: 1; stroke-dasharray: 1, 0;"></path></marker></defs></g><g class="edgePath" style="opacity: 1;"><path class="path" d="M346.109375,463.58994115998877L265.5,492.5L216.046875,492.5L166.59375,470.07227891156464" marker-end="url(#arrowhead10)" style="fill:none"></path><defs><marker id="arrowhead10" viewBox="0 0 10 10" refX="9" refY="5" markerUnits="strokeWidth" markerWidth="8" markerHeight="6" orient="auto"><path d="M 0 0 L 10 5 L 0 10 z" class="arrowheadPath" style="stroke-width: 1; stroke-dasharray: 1, 0;"></path></marker></defs></g><g class="edgePath" style="opacity: 1;"><path class="path" d="M519.328125,160L544.328125,160L584.3359375,160L624.34375,160L712.075,280" marker-end="url(#arrowhead11)" style="fill:none"></path><defs><marker id="arrowhead11" viewBox="0 0 10 10" refX="9" refY="5" markerUnits="strokeWidth" markerWidth="8" markerHeight="6" orient="auto"><path d="M 0 0 L 10 5 L 0 10 z" class="arrowheadPath" style="stroke-width: 1; stroke-dasharray: 1, 0;"></path></marker></defs></g><g class="edgePath" style="opacity: 1;"><path class="path" d="M1151.484375,116.46748062925569L1102.03125,140L1002.59375,140L898.140625,140L843.671875,140L734.0078125,140L624.34375,140L584.3359375,140L544.328125,410L463.71875,428.7915382460073" marker-end="url(#arrowhead12)" style="stroke: #333; fill:none;stroke-width:2px;stroke-dasharray:3;"></path><defs><marker id="arrowhead12" viewBox="0 0 10 10" refX="9" refY="5" markerUnits="strokeWidth" markerWidth="8" markerHeight="6" orient="auto"><path d="M 0 0 L 10 5 L 0 10 z" class="arrowheadPath" style="stroke-width: 1; stroke-dasharray: 1, 0;"></path></marker></defs></g><g class="edgePath" style="opacity: 1;"><path class="path" d="M818.671875,310L843.671875,310L898.140625,310L973.4440406976744,387.5" marker-end="url(#arrowhead13)" style="fill:none"></path><defs><marker id="arrowhead13" viewBox="0 0 10 10" refX="9" refY="5" markerUnits="strokeWidth" markerWidth="8" markerHeight="6" orient="auto"><path d="M 0 0 L 10 5 L 0 10 z" class="arrowheadPath" style="stroke-width: 1; stroke-dasharray: 1, 0;"></path></marker></defs></g><g class="edgePath" style="opacity: 1;"><path class="path" d="M463.71875,441.4455029420006L544.328125,440L584.3359375,440L624.34375,440L690.1796875,440" marker-end="url(#arrowhead14)" style="fill:none"></path><defs><marker id="arrowhead14" viewBox="0 0 10 10" refX="9" refY="5" markerUnits="strokeWidth" markerWidth="8" markerHeight="6" orient="auto"><path d="M 0 0 L 10 5 L 0 10 z" class="arrowheadPath" style="stroke-width: 1; stroke-dasharray: 1, 0;"></path></marker></defs></g><g class="edgePath" style="opacity: 1;"><path class="path" d="M463.71875,420.35556178201176L544.328125,390L584.3359375,60L624.34375,60L734.0078125,60L843.671875,60L898.140625,60L1002.59375,60L1102.03125,60L1151.484375,76.10119746419348" marker-end="url(#arrowhead15)" style="stroke: #333; fill:none;stroke-width:2px;stroke-dasharray:3;"></path><defs><marker id="arrowhead15" viewBox="0 0 10 10" refX="9" refY="5" markerUnits="strokeWidth" markerWidth="8" markerHeight="6" orient="auto"><path d="M 0 0 L 10 5 L 0 10 z" class="arrowheadPath" style="stroke-width: 1; stroke-dasharray: 1, 0;"></path></marker></defs></g><g class="edgePath" style="opacity: 1;"><path class="path" d="M973.4440406976744,447.5L898.140625,525L843.671875,525L734.0078125,525L624.34375,525L584.3359375,525L544.328125,525L455.61008522727275,472.5" marker-end="url(#arrowhead16)" style="fill:none"></path><defs><marker id="arrowhead16" viewBox="0 0 10 10" refX="9" refY="5" markerUnits="strokeWidth" markerWidth="8" markerHeight="6" orient="auto"><path d="M 0 0 L 10 5 L 0 10 z" class="arrowheadPath" style="stroke-width: 1; stroke-dasharray: 1, 0;"></path></marker></defs></g><g class="edgePath" style="opacity: 1;"><path class="path" d="M777.8359375,440L843.671875,440L898.140625,440L952.609375,428.26701570680626" marker-end="url(#arrowhead17)" style="fill:none"></path><defs><marker id="arrowhead17" viewBox="0 0 10 10" refX="9" refY="5" markerUnits="strokeWidth" markerWidth="8" markerHeight="6" orient="auto"><path d="M 0 0 L 10 5 L 0 10 z" class="arrowheadPath" style="stroke-width: 1; stroke-dasharray: 1, 0;"></path></marker></defs></g><g class="edgePath" style="opacity: 1;"><path class="path" d="M1011.9894192913385,387.5L1102.03125,100L1151.484375,96.28433904672458" marker-end="url(#arrowhead18)" style="fill:none"></path><defs><marker id="arrowhead18" viewBox="0 0 10 10" refX="9" refY="5" markerUnits="strokeWidth" markerWidth="8" markerHeight="6" orient="auto"><path d="M 0 0 L 10 5 L 0 10 z" class="arrowheadPath" style="stroke-width: 1; stroke-dasharray: 1, 0;"></path></marker></defs></g><g class="edgePath" style="opacity: 1;"><path class="path" d="M1252.21875,92.5L1277.21875,92.5L1302.21875,92.5L1327.21875,92.5L1352.21875,92.5" marker-end="url(#arrowhead19)" style="fill:none"></path><defs><marker id="arrowhead19" viewBox="0 0 10 10" refX="9" refY="5" markerUnits="strokeWidth" markerWidth="8" markerHeight="6" orient="auto"><path d="M 0 0 L 10 5 L 0 10 z" class="arrowheadPath" style="stroke-width: 1; stroke-dasharray: 1, 0;"></path></marker></defs></g></g><g class="edgeLabels"><g class="edgeLabel" transform="translate(216.046875,390)" style="opacity: 1;"><g transform="translate(-11.109375,-20)" class="label"><foreignobject width="22.2265625" height="40"><div xmlns="http://www.w3.org/1999/xhtml" style="display: inline-block; white-space: nowrap;"><span class="edgeLabel">url</span></div></foreignobject></g></g><g class="edgeLabel" transform="translate(216.046875,492.5)" style="opacity: 1;"><g transform="translate(-24.453125,-20)" class="label"><foreignobject width="48.90625" height="40"><div xmlns="http://www.w3.org/1999/xhtml" style="display: inline-block; white-space: nowrap;"><span class="edgeLabel">result</span></div></foreignobject></g></g><g class="edgeLabel" transform="" style="opacity: 1;"><g transform="translate(0,0)" class="label"><foreignobject width="0" height="0"><div xmlns="http://www.w3.org/1999/xhtml" style="display: inline-block; white-space: nowrap;"><span class="edgeLabel"></span></div></foreignobject></g></g><g class="edgeLabel" transform="" style="opacity: 1;"><g transform="translate(0,0)" class="label"><foreignobject width="0" height="0"><div xmlns="http://www.w3.org/1999/xhtml" style="display: inline-block; white-space: nowrap;"><span class="edgeLabel"></span></div></foreignobject></g></g><g class="edgeLabel" transform="translate(898.140625,310)" style="opacity: 1;"><g transform="translate(-19.453125,-20)" class="label"><foreignobject width="38.90625" height="40"><div xmlns="http://www.w3.org/1999/xhtml" style="display: inline-block; white-space: nowrap;"><span class="edgeLabel">train</span></div></foreignobject></g></g><g class="edgeLabel" transform="translate(584.3359375,440)" style="opacity: 1;"><g transform="translate(-15.0078125,-20)" class="label"><foreignobject width="30.01953125" height="40"><div xmlns="http://www.w3.org/1999/xhtml" style="display: inline-block; white-space: nowrap;"><span class="edgeLabel">call</span></div></foreignobject></g></g><g class="edgeLabel" transform="translate(898.140625,60)" style="opacity: 1;"><g transform="translate(-29.46875,-20)" class="label"><foreignobject width="58.9453125" height="40"><div xmlns="http://www.w3.org/1999/xhtml" style="display: inline-block; white-space: nowrap;"><span class="edgeLabel">lookup</span></div></foreignobject></g></g><g class="edgeLabel" transform="translate(734.0078125,525)" style="opacity: 1;"><g transform="translate(-40.015625,-20)" class="label"><foreignobject width="80.0390625" height="40"><div xmlns="http://www.w3.org/1999/xhtml" style="display: inline-block; white-space: nowrap;"><span class="edgeLabel">clf_result</span></div></foreignobject></g></g><g class="edgeLabel" transform="translate(898.140625,440)" style="opacity: 1;"><g transform="translate(-19.4609375,-20)" class="label"><foreignobject width="38.92578125" height="40"><div xmlns="http://www.w3.org/1999/xhtml" style="display: inline-block; white-space: nowrap;"><span class="edgeLabel">data</span></div></foreignobject></g></g><g class="edgeLabel" transform="translate(1102.03125,100)" style="opacity: 1;"><g transform="translate(-24.453125,-20)" class="label"><foreignobject width="48.90625" height="40"><div xmlns="http://www.w3.org/1999/xhtml" style="display: inline-block; white-space: nowrap;"><span class="edgeLabel">result</span></div></foreignobject></g></g><g class="edgeLabel" transform="" style="opacity: 1;"><g transform="translate(0,0)" class="label"><foreignobject width="0" height="0"><div xmlns="http://www.w3.org/1999/xhtml" style="display: inline-block; white-space: nowrap;"><span class="edgeLabel"></span></div></foreignobject></g></g></g><g class="nodes"><g class="node" id="server_side" transform="translate(105.796875,442.5)" style="opacity: 1;"><rect rx="0" ry="0" x="-60.796875" y="-30" width="121.59375" height="60"></rect><g class="label" transform="translate(0,0)"><g transform="translate(-50.796875,-20)"><foreignobject width="101.6015625" height="40"><div xmlns="http://www.w3.org/1999/xhtml" style="display: inline-block; white-space: nowrap;">server_side</div></foreignobject></g></g></g><g class="node" id="client_side" transform="translate(404.9140625,442.5)" style="opacity: 1;"><rect rx="0" ry="0" x="-58.8046875" y="-30" width="117.609375" height="60"></rect><g class="label" transform="translate(0,0)"><g transform="translate(-48.8046875,-20)"><foreignobject width="97.6171875" height="40"><div xmlns="http://www.w3.org/1999/xhtml" style="display: inline-block; white-space: nowrap;">client_side</div></foreignobject></g></g></g><g class="node" id="database" transform="translate(1201.8515625,92.5)" style="opacity: 1;"><rect rx="0" ry="0" x="-50.3671875" y="-30" width="100.734375" height="60"></rect><g class="label" transform="translate(0,0)"><g transform="translate(-40.3671875,-20)"><foreignobject width="80.7421875" height="40"><div xmlns="http://www.w3.org/1999/xhtml" style="display: inline-block; white-space: nowrap;">database</div></foreignobject></g></g></g><g class="node" id="marked_data_database" transform="translate(404.9140625,160)" style="opacity: 1;"><rect rx="0" ry="0" x="-114.4140625" y="-30" width="228.828125" height="60"></rect><g class="label" transform="translate(0,0)"><g transform="translate(-104.4140625,-20)"><foreignobject width="208.828125" height="40"><div xmlns="http://www.w3.org/1999/xhtml" style="display: inline-block; white-space: nowrap;">marked_data_database</div></foreignobject></g></g></g><g class="node" id="todo" transform="translate(1382.4921875,92.5)" style="opacity: 1;"><rect rx="0" ry="0" x="-30.2734375" y="-30" width="60.546875" height="60"></rect><g class="label" transform="translate(0,0)"><g transform="translate(-20.2734375,-20)"><foreignobject width="40.546875" height="40"><div xmlns="http://www.w3.org/1999/xhtml" style="display: inline-block; white-space: nowrap;">todo</div></foreignobject></g></g></g><g class="node" id="local_cls_trainer" transform="translate(734.0078125,310)" style="opacity: 1;"><rect rx="0" ry="0" x="-84.6640625" y="-30" width="169.328125" height="60"></rect><g class="label" transform="translate(0,0)"><g transform="translate(-74.6640625,-20)"><foreignobject width="149.3359375" height="40"><div xmlns="http://www.w3.org/1999/xhtml" style="display: inline-block; white-space: nowrap;">local_cls_trainer</div></foreignobject></g></g></g><g class="node" id="classifier" transform="translate(1002.59375,417.5)" style="opacity: 1;"><rect rx="0" ry="0" x="-49.984375" y="-30" width="99.96875" height="60"></rect><g class="label" transform="translate(0,0)"><g transform="translate(-39.984375,-20)"><foreignobject width="79.98046875" height="40"><div xmlns="http://www.w3.org/1999/xhtml" style="display: inline-block; white-space: nowrap;">classifier</div></foreignobject></g></g></g><g class="node" id="crawler" transform="translate(734.0078125,440)" style="opacity: 1;"><rect rx="0" ry="0" x="-43.828125" y="-30" width="87.65625" height="60"></rect><g class="label" transform="translate(0,0)"><g transform="translate(-33.828125,-20)"><foreignobject width="67.65625" height="40"><div xmlns="http://www.w3.org/1999/xhtml" style="display: inline-block; white-space: nowrap;">crawler</div></foreignobject></g></g></g></g></g></g></svg></div><p>Notes: Dotted line in graph means it shows the data flow in real scene. Solid line in graph means it is the real data flow in live demo.</p>
<p>About how exactly this system works, see <code>usage::extension</code></p>
<h2 class="mume-header" id="63-modules-explanation">6.3. Modules Explanation</h2>

<ul>
<li>Preprocess
<ul>
<li><a href="http://yelpdbreader.py/">yelpdbreader.py</a> <code>This module is used to interact with the Yelp database</code></li>
<li>preprocess_db.py <code>This module will extract extra feature from Yelp database for marked review data set.</code></li>
<li>preprocess_review.py <code>This module is used for steming and stopword removing.</code></li>
<li>vader_awmod.py <code>Vader sentiment scorer.</code></li>
</ul>
</li>
<li>Runtime data crawler
<ul>
<li><a href="http://pageparser.py/">pageparser.py</a> <code>This module is used to crawl reviews from Yelp.</code></li>
<li>user_crawler.py <code>This module is used to crawl social features from a known user.</code></li>
</ul>
</li>
<li>Classifier
<ul>
<li><a href="http://classifier.py/">classifier.py</a> <code>Classifier define, load and save model.</code></li>
</ul>
</li>
<li>Chrome Extension
<ul>
<li>Client Side:
<ul>
<li>./extension <code>Extension file folder. (Client side)</code></li>
</ul>
</li>
<li>Server Side(demo):
<ul>
<li><a href="http://server.py/">server.py</a> <code>Server side for Chrome extension. Will run classify task for all valid post requests.</code></li>
</ul>
</li>
</ul>
</li>
</ul>
<hr>
<h1 class="mume-header" id="7-details-of-classifier">7. Details of Classifier</h1>

<h2 class="mume-header" id="71-core-classifier">7.1. Core classifier</h2>

<div class="mermaid" data-processed="true"><svg id="mermaid-1555322228446" width="100%" xmlns="http://www.w3.org/2000/svg" style="max-width: 925.0390625px;" viewBox="0 0 925.0390625 796"><style>#mermaid-1555322228446 .label{font-family:'trebuchet ms', verdana, arial;color:#333}#mermaid-1555322228446 .node rect,#mermaid-1555322228446 .node circle,#mermaid-1555322228446 .node ellipse,#mermaid-1555322228446 .node polygon{fill:#cde498;stroke:#13540c;stroke-width:1px}#mermaid-1555322228446 .node.clickable{cursor:pointer}#mermaid-1555322228446 .arrowheadPath{fill:green}#mermaid-1555322228446 .edgePath .path{stroke:green;stroke-width:1.5px}#mermaid-1555322228446 .edgeLabel{background-color:#e8e8e8}#mermaid-1555322228446 .cluster rect{fill:#cdffb2 !important;stroke:#6eaa49 !important;stroke-width:1px !important}#mermaid-1555322228446 .cluster text{fill:#333}#mermaid-1555322228446 div.mermaidTooltip{position:absolute;text-align:center;max-width:200px;padding:2px;font-family:'trebuchet ms', verdana, arial;font-size:12px;background:#cdffb2;border:1px solid #6eaa49;border-radius:2px;pointer-events:none;z-index:100}#mermaid-1555322228446 .actor{stroke:#13540c;fill:#cde498}#mermaid-1555322228446 text.actor{fill:#000;stroke:none}#mermaid-1555322228446 .actor-line{stroke:grey}#mermaid-1555322228446 .messageLine0{stroke-width:1.5;stroke-dasharray:'2 2';stroke:#333}#mermaid-1555322228446 .messageLine1{stroke-width:1.5;stroke-dasharray:'2 2';stroke:#333}#mermaid-1555322228446 #arrowhead{fill:#333}#mermaid-1555322228446 #crosshead path{fill:#333 !important;stroke:#333 !important}#mermaid-1555322228446 .messageText{fill:#333;stroke:none}#mermaid-1555322228446 .labelBox{stroke:#326932;fill:#cde498}#mermaid-1555322228446 .labelText{fill:#000;stroke:none}#mermaid-1555322228446 .loopText{fill:#000;stroke:none}#mermaid-1555322228446 .loopLine{stroke-width:2;stroke-dasharray:'2 2';stroke:#326932}#mermaid-1555322228446 .note{stroke:#6eaa49;fill:#fff5ad}#mermaid-1555322228446 .noteText{fill:black;stroke:none;font-family:'trebuchet ms', verdana, arial;font-size:14px}#mermaid-1555322228446 .activation0{fill:#f4f4f4;stroke:#666}#mermaid-1555322228446 .activation1{fill:#f4f4f4;stroke:#666}#mermaid-1555322228446 .activation2{fill:#f4f4f4;stroke:#666}#mermaid-1555322228446 .section{stroke:none;opacity:0.2}#mermaid-1555322228446 .section0{fill:#6eaa49}#mermaid-1555322228446 .section2{fill:#6eaa49}#mermaid-1555322228446 .section1,#mermaid-1555322228446 .section3{fill:#fff;opacity:0.2}#mermaid-1555322228446 .sectionTitle0{fill:#333}#mermaid-1555322228446 .sectionTitle1{fill:#333}#mermaid-1555322228446 .sectionTitle2{fill:#333}#mermaid-1555322228446 .sectionTitle3{fill:#333}#mermaid-1555322228446 .sectionTitle{text-anchor:start;font-size:11px;text-height:14px}#mermaid-1555322228446 .grid .tick{stroke:#d3d3d3;opacity:0.3;shape-rendering:crispEdges}#mermaid-1555322228446 .grid path{stroke-width:0}#mermaid-1555322228446 .today{fill:none;stroke:red;stroke-width:2px}#mermaid-1555322228446 .task{stroke-width:2}#mermaid-1555322228446 .taskText{text-anchor:middle;font-size:11px}#mermaid-1555322228446 .taskTextOutsideRight{fill:#000;text-anchor:start;font-size:11px}#mermaid-1555322228446 .taskTextOutsideLeft{fill:#000;text-anchor:end;font-size:11px}#mermaid-1555322228446 .taskText0,#mermaid-1555322228446 .taskText1,#mermaid-1555322228446 .taskText2,#mermaid-1555322228446 .taskText3{fill:#fff}#mermaid-1555322228446 .task0,#mermaid-1555322228446 .task1,#mermaid-1555322228446 .task2,#mermaid-1555322228446 .task3{fill:#487e3a;stroke:#13540c}#mermaid-1555322228446 .taskTextOutside0,#mermaid-1555322228446 .taskTextOutside2{fill:#000}#mermaid-1555322228446 .taskTextOutside1,#mermaid-1555322228446 .taskTextOutside3{fill:#000}#mermaid-1555322228446 .active0,#mermaid-1555322228446 .active1,#mermaid-1555322228446 .active2,#mermaid-1555322228446 .active3{fill:#cde498;stroke:#13540c}#mermaid-1555322228446 .activeText0,#mermaid-1555322228446 .activeText1,#mermaid-1555322228446 .activeText2,#mermaid-1555322228446 .activeText3{fill:#000 !important}#mermaid-1555322228446 .done0,#mermaid-1555322228446 .done1,#mermaid-1555322228446 .done2,#mermaid-1555322228446 .done3{stroke:grey;fill:#d3d3d3;stroke-width:2}#mermaid-1555322228446 .doneText0,#mermaid-1555322228446 .doneText1,#mermaid-1555322228446 .doneText2,#mermaid-1555322228446 .doneText3{fill:#000 !important}#mermaid-1555322228446 .crit0,#mermaid-1555322228446 .crit1,#mermaid-1555322228446 .crit2,#mermaid-1555322228446 .crit3{stroke:#f88;fill:red;stroke-width:2}#mermaid-1555322228446 .activeCrit0,#mermaid-1555322228446 .activeCrit1,#mermaid-1555322228446 .activeCrit2,#mermaid-1555322228446 .activeCrit3{stroke:#f88;fill:#cde498;stroke-width:2}#mermaid-1555322228446 .doneCrit0,#mermaid-1555322228446 .doneCrit1,#mermaid-1555322228446 .doneCrit2,#mermaid-1555322228446 .doneCrit3{stroke:#f88;fill:#d3d3d3;stroke-width:2;cursor:pointer;shape-rendering:crispEdges}#mermaid-1555322228446 .doneCritText0,#mermaid-1555322228446 .doneCritText1,#mermaid-1555322228446 .doneCritText2,#mermaid-1555322228446 .doneCritText3{fill:#000 !important}#mermaid-1555322228446 .activeCritText0,#mermaid-1555322228446 .activeCritText1,#mermaid-1555322228446 .activeCritText2,#mermaid-1555322228446 .activeCritText3{fill:#000 !important}#mermaid-1555322228446 .titleText{text-anchor:middle;font-size:18px;fill:#000}#mermaid-1555322228446 g.classGroup text{fill:#13540c;stroke:none;font-family:'trebuchet ms', verdana, arial;font-size:10px}#mermaid-1555322228446 g.classGroup rect{fill:#cde498;stroke:#13540c}#mermaid-1555322228446 g.classGroup line{stroke:#13540c;stroke-width:1}#mermaid-1555322228446 .classLabel .box{stroke:none;stroke-width:0;fill:#cde498;opacity:0.5}#mermaid-1555322228446 .classLabel .label{fill:#13540c;font-size:10px}#mermaid-1555322228446 .relation{stroke:#13540c;stroke-width:1;fill:none}#mermaid-1555322228446 #compositionStart{fill:#13540c;stroke:#13540c;stroke-width:1}#mermaid-1555322228446 #compositionEnd{fill:#13540c;stroke:#13540c;stroke-width:1}#mermaid-1555322228446 #aggregationStart{fill:#cde498;stroke:#13540c;stroke-width:1}#mermaid-1555322228446 #aggregationEnd{fill:#cde498;stroke:#13540c;stroke-width:1}#mermaid-1555322228446 #dependencyStart{fill:#13540c;stroke:#13540c;stroke-width:1}#mermaid-1555322228446 #dependencyEnd{fill:#13540c;stroke:#13540c;stroke-width:1}#mermaid-1555322228446 #extensionStart{fill:#13540c;stroke:#13540c;stroke-width:1}#mermaid-1555322228446 #extensionEnd{fill:#13540c;stroke:#13540c;stroke-width:1}#mermaid-1555322228446 .commit-id,#mermaid-1555322228446 .commit-msg,#mermaid-1555322228446 .branch-label{fill:lightgrey;color:lightgrey}
</style><style>#mermaid-1555322228446 {
    color: rgb(51, 51, 51);
    font: normal normal 400 normal 16px / 25.6px "Helvetica Neue", Helvetica, "Segoe UI", Arial, freesans, sans-serif;
  }</style><g transform="translate(-12, -12)"><g class="output"><g class="clusters"><g class="cluster" id="subGraph0" transform="translate(413.05078125,560)" style="opacity: 1;"><rect width="489.3203125" height="260" x="-244.66015625" y="-130"></rect><g class="label"><g transform="translate(0,0)"><foreignobject width="0" height="0"><div xmlns="http://www.w3.org/1999/xhtml" style="display: inline-block; white-space: nowrap;"></div></foreignobject></g></g><text x="0" y="-116" fill="black" stroke="none" id="mermaid-1555322228446Text" style="text-anchor: middle;">late_regression</text></g></g><g class="edgePaths"><g class="edgePath" style="opacity: 1;"><path class="path" d="M446.76953125,80L446.76953125,125L446.76953125,170" marker-end="url(#arrowhead20)" style="fill:none"></path><defs><marker id="arrowhead20" viewBox="0 0 10 10" refX="9" refY="5" markerUnits="strokeWidth" markerWidth="8" markerHeight="6" orient="auto"><path d="M 0 0 L 10 5 L 0 10 z" class="arrowheadPath" style="stroke-width: 1; stroke-dasharray: 1, 0;"></path></marker></defs></g><g class="edgePath" style="opacity: 1;"><path class="path" d="M353.87109375,214.0327858299986L82.6640625,255L82.6640625,280" marker-end="url(#arrowhead21)" style="fill:none"></path><defs><marker id="arrowhead21" viewBox="0 0 10 10" refX="9" refY="5" markerUnits="strokeWidth" markerWidth="8" markerHeight="6" orient="auto"><path d="M 0 0 L 10 5 L 0 10 z" class="arrowheadPath" style="stroke-width: 1; stroke-dasharray: 1, 0;"></path></marker></defs></g><g class="edgePath" style="opacity: 1;"><path class="path" d="M82.6640625,340L82.6640625,385L82.6640625,430L82.6640625,455" marker-end="url(#arrowhead22)" style="fill:none"></path><defs><marker id="arrowhead22" viewBox="0 0 10 10" refX="9" refY="5" markerUnits="strokeWidth" markerWidth="8" markerHeight="6" orient="auto"><path d="M 0 0 L 10 5 L 0 10 z" class="arrowheadPath" style="stroke-width: 1; stroke-dasharray: 1, 0;"></path></marker></defs></g><g class="edgePath" style="opacity: 1;"><path class="path" d="M539.66796875,214.0327858299986L810.875,255L810.875,310L810.875,385L810.875,430L810.875,455" marker-end="url(#arrowhead23)" style="fill:none"></path><defs><marker id="arrowhead23" viewBox="0 0 10 10" refX="9" refY="5" markerUnits="strokeWidth" markerWidth="8" markerHeight="6" orient="auto"><path d="M 0 0 L 10 5 L 0 10 z" class="arrowheadPath" style="stroke-width: 1; stroke-dasharray: 1, 0;"></path></marker></defs></g><g class="edgePath" style="opacity: 1;"><path class="path" d="M133.390625,512.658819186096L220.21484375,560L327.1640625,613.0176086339109" marker-end="url(#arrowhead24)" style="fill:none"></path><defs><marker id="arrowhead24" viewBox="0 0 10 10" refX="9" refY="5" markerUnits="strokeWidth" markerWidth="8" markerHeight="6" orient="auto"><path d="M 0 0 L 10 5 L 0 10 z" class="arrowheadPath" style="stroke-width: 1; stroke-dasharray: 1, 0;"></path></marker></defs></g><g class="edgePath" style="opacity: 1;"><path class="path" d="M272.0390625,515L272.0390625,560L331.7203125,605" marker-end="url(#arrowhead25)" style="fill:none"></path><defs><marker id="arrowhead25" viewBox="0 0 10 10" refX="9" refY="5" markerUnits="strokeWidth" markerWidth="8" markerHeight="6" orient="auto"><path d="M 0 0 L 10 5 L 0 10 z" class="arrowheadPath" style="stroke-width: 1; stroke-dasharray: 1, 0;"></path></marker></defs></g><g class="edgePath" style="opacity: 1;"><path class="path" d="M470.9765625,515L470.9765625,560L411.2953125,605" marker-end="url(#arrowhead26)" style="fill:none"></path><defs><marker id="arrowhead26" viewBox="0 0 10 10" refX="9" refY="5" markerUnits="strokeWidth" markerWidth="8" markerHeight="6" orient="auto"><path d="M 0 0 L 10 5 L 0 10 z" class="arrowheadPath" style="stroke-width: 1; stroke-dasharray: 1, 0;"></path></marker></defs></g><g class="edgePath" style="opacity: 1;"><path class="path" d="M371.5078125,665L371.5078125,690L371.5078125,715L371.5078125,740" marker-end="url(#arrowhead27)" style="fill:none"></path><defs><marker id="arrowhead27" viewBox="0 0 10 10" refX="9" refY="5" markerUnits="strokeWidth" markerWidth="8" markerHeight="6" orient="auto"><path d="M 0 0 L 10 5 L 0 10 z" class="arrowheadPath" style="stroke-width: 1; stroke-dasharray: 1, 0;"></path></marker></defs></g><g class="edgePath" style="opacity: 1;"><path class="path" d="M712.2625,515L564.34375,560L415.8515625,617.7533119961107" marker-end="url(#arrowhead28)" style="fill:none"></path><defs><marker id="arrowhead28" viewBox="0 0 10 10" refX="9" refY="5" markerUnits="strokeWidth" markerWidth="8" markerHeight="6" orient="auto"><path d="M 0 0 L 10 5 L 0 10 z" class="arrowheadPath" style="stroke-width: 1; stroke-dasharray: 1, 0;"></path></marker></defs></g></g><g class="edgeLabels"><g class="edgeLabel" transform="translate(446.76953125,125)" style="opacity: 1;"><g transform="translate(-128.9609375,-20)" class="label"><foreignobject width="257.9296875" height="40"><div xmlns="http://www.w3.org/1999/xhtml" style="display: inline-block; white-space: nowrap;"><span class="edgeLabel">stem_and_remove_stopword</span></div></foreignobject></g></g><g class="edgeLabel" transform="" style="opacity: 1;"><g transform="translate(0,0)" class="label"><foreignobject width="0" height="0"><div xmlns="http://www.w3.org/1999/xhtml" style="display: inline-block; white-space: nowrap;"><span class="edgeLabel"></span></div></foreignobject></g></g><g class="edgeLabel" transform="translate(82.6640625,385)" style="opacity: 1;"><g transform="translate(-48.9140625,-20)" class="label"><foreignobject width="97.83203125" height="40"><div xmlns="http://www.w3.org/1999/xhtml" style="display: inline-block; white-space: nowrap;"><span class="edgeLabel">tfidf_vector</span></div></foreignobject></g></g><g class="edgeLabel" transform="" style="opacity: 1;"><g transform="translate(0,0)" class="label"><foreignobject width="0" height="0"><div xmlns="http://www.w3.org/1999/xhtml" style="display: inline-block; white-space: nowrap;"><span class="edgeLabel"></span></div></foreignobject></g></g><g class="edgeLabel" transform="translate(220.21484375,560)" style="opacity: 1;"><g transform="translate(-24.453125,-20)" class="label"><foreignobject width="48.90625" height="40"><div xmlns="http://www.w3.org/1999/xhtml" style="display: inline-block; white-space: nowrap;"><span class="edgeLabel">result</span></div></foreignobject></g></g><g class="edgeLabel" transform="" style="opacity: 1;"><g transform="translate(0,0)" class="label"><foreignobject width="0" height="0"><div xmlns="http://www.w3.org/1999/xhtml" style="display: inline-block; white-space: nowrap;"><span class="edgeLabel"></span></div></foreignobject></g></g><g class="edgeLabel" transform="" style="opacity: 1;"><g transform="translate(0,0)" class="label"><foreignobject width="0" height="0"><div xmlns="http://www.w3.org/1999/xhtml" style="display: inline-block; white-space: nowrap;"><span class="edgeLabel"></span></div></foreignobject></g></g><g class="edgeLabel" transform="" style="opacity: 1;"><g transform="translate(0,0)" class="label"><foreignobject width="0" height="0"><div xmlns="http://www.w3.org/1999/xhtml" style="display: inline-block; white-space: nowrap;"><span class="edgeLabel"></span></div></foreignobject></g></g><g class="edgeLabel" transform="translate(564.34375,560)" style="opacity: 1;"><g transform="translate(-73.3671875,-20)" class="label"><foreignobject width="146.73828125" height="40"><div xmlns="http://www.w3.org/1999/xhtml" style="display: inline-block; white-space: nowrap;"><span class="edgeLabel">sentiment_score</span></div></foreignobject></g></g></g><g class="nodes"><g class="node" id="xgboost" transform="translate(371.5078125,635)" style="opacity: 1;"><rect rx="0" ry="0" x="-44.34375" y="-30" width="88.6875" height="60"></rect><g class="label" transform="translate(0,0)"><g transform="translate(-34.34375,-20)"><foreignobject width="68.69140625" height="40"><div xmlns="http://www.w3.org/1999/xhtml" style="display: inline-block; white-space: nowrap;">xgboost</div></foreignobject></g></g></g><g class="node" id="UserFeatures" transform="translate(272.0390625,485)" style="opacity: 1;"><rect rx="0" ry="0" x="-68.6484375" y="-30" width="137.296875" height="60"></rect><g class="label" transform="translate(0,0)"><g transform="translate(-58.6484375,-20)"><foreignobject width="117.3046875" height="40"><div xmlns="http://www.w3.org/1999/xhtml" style="display: inline-block; white-space: nowrap;">UserFeatures</div></foreignobject></g></g></g><g class="node" id="ReviewFeatures" transform="translate(470.9765625,485)" style="opacity: 1;"><rect rx="0" ry="0" x="-80.2890625" y="-30" width="160.578125" height="60"></rect><g class="label" transform="translate(0,0)"><g transform="translate(-70.2890625,-20)"><foreignobject width="140.5859375" height="40"><div xmlns="http://www.w3.org/1999/xhtml" style="display: inline-block; white-space: nowrap;">ReviewFeatures</div></foreignobject></g></g></g><g class="node" id="result" transform="translate(371.5078125,770)" style="opacity: 1;"><rect rx="0" ry="0" x="-35.765625" y="-30" width="71.53125" height="60"></rect><g class="label" transform="translate(0,0)"><g transform="translate(-25.765625,-20)"><foreignobject width="51.54296875" height="40"><div xmlns="http://www.w3.org/1999/xhtml" style="display: inline-block; white-space: nowrap;">result</div></foreignobject></g></g></g><g class="node" id="text" transform="translate(446.76953125,50)" style="opacity: 1;"><rect rx="0" ry="0" x="-28.3984375" y="-30" width="56.796875" height="60"></rect><g class="label" transform="translate(0,0)"><g transform="translate(-18.3984375,-20)"><foreignobject width="36.796875" height="40"><div xmlns="http://www.w3.org/1999/xhtml" style="display: inline-block; white-space: nowrap;">text</div></foreignobject></g></g></g><g class="node" id="preprocessed_text" transform="translate(446.76953125,200)" style="opacity: 1;"><rect rx="0" ry="0" x="-92.8984375" y="-30" width="185.796875" height="60"></rect><g class="label" transform="translate(0,0)"><g transform="translate(-82.8984375,-20)"><foreignobject width="165.80078125" height="40"><div xmlns="http://www.w3.org/1999/xhtml" style="display: inline-block; white-space: nowrap;">preprocessed_text</div></foreignobject></g></g></g><g class="node" id="tfidf_model" transform="translate(82.6640625,310)" style="opacity: 1;"><rect rx="0" ry="0" x="-62.6640625" y="-30" width="125.328125" height="60"></rect><g class="label" transform="translate(0,0)"><g transform="translate(-52.6640625,-20)"><foreignobject width="105.33203125" height="40"><div xmlns="http://www.w3.org/1999/xhtml" style="display: inline-block; white-space: nowrap;">tfidf_model</div></foreignobject></g></g></g><g class="node" id="SVM_SGD" transform="translate(82.6640625,485)" style="opacity: 1;"><rect rx="0" ry="0" x="-50.7265625" y="-30" width="101.453125" height="60"></rect><g class="label" transform="translate(0,0)"><g transform="translate(-40.7265625,-20)"><foreignobject width="81.46484375" height="40"><div xmlns="http://www.w3.org/1999/xhtml" style="display: inline-block; white-space: nowrap;">SVM_SGD</div></foreignobject></g></g></g><g class="node" id="vader_sentiment_model" transform="translate(810.875,485)" style="opacity: 1;"><rect rx="0" ry="0" x="-118.1640625" y="-30" width="236.328125" height="60"></rect><g class="label" transform="translate(0,0)"><g transform="translate(-108.1640625,-20)"><foreignobject width="216.328125" height="40"><div xmlns="http://www.w3.org/1999/xhtml" style="display: inline-block; white-space: nowrap;">vader_sentiment_model</div></foreignobject></g></g></g></g></g></g></svg></div><p>As the graph shows, this model is mainly a two level model. Review text, after stemming and vectorizing, will be send to a SVM classifier, it will generate a classify result. In the mean time, a rule based sentiment analyzer will give out the sentiment score for a review. Then we do a late fusion on all the features, we gather user features, review features (see the table below), sentiment score, SVM result together, and use the xgboost model to do the final job.</p>
<h2 class="mume-header" id="72-notations">7.2. Notations</h2>

<ul>
<li>UF: user features, eg: the friend number of a reviewer</li>
<li>RF: review features, eg: the number of Useful/Cool remark for a review</li>
<li>TF: review text features</li>
<li>TFS: review text feature: sentiment score</li>
<li>SG: complex social feature (social graph, etc.), eg: ave friend count of a review's friends/if the reviewer has a friend who has a high chance to be a fake review maker.</li>
</ul>
<h2 class="mume-header" id="73-full-features-list">7.3. Full features list</h2>

<p>Following is a list of all the features that we have tried. Not all of them are used in the final model.</p>
<table>
<thead>
<tr>
<th>Feature type</th>
<th>Feature name</th>
<th>Notes</th>
</tr>
</thead>
<tbody>
<tr>
<td>TF</td>
<td>tf-idf_vector</td>
<td>-</td>
</tr>
<tr>
<td>TFS</td>
<td>vader sentiment score</td>
<td>-</td>
</tr>
<tr>
<td>RF</td>
<td>grade</td>
<td>the grade the reviewer gave</td>
</tr>
<tr>
<td>RF</td>
<td>useful</td>
<td><code>useful</code> in RF means "how many people think <strong>this review</strong> is useful"</td>
</tr>
<tr>
<td>RF</td>
<td>cool</td>
<td>ditto</td>
</tr>
<tr>
<td>RF</td>
<td>funny</td>
<td>ditto</td>
</tr>
<tr>
<td>RF</td>
<td>total_votes</td>
<td>total_votes=useful+cool+funny</td>
</tr>
<tr>
<td>UF</td>
<td>useful</td>
<td><code>useful</code> in RF means "how many <strong>useful</strong> has this reviewer gotten in total"</td>
</tr>
<tr>
<td>UF</td>
<td>cool</td>
<td>ditto</td>
</tr>
<tr>
<td>UF</td>
<td>funny</td>
<td>ditto</td>
</tr>
<tr>
<td>UF</td>
<td>total_votes</td>
<td>total_votes=useful+cool+funny</td>
</tr>
<tr>
<td>UF</td>
<td>firsts</td>
<td>How many times has the reviewer been the first one to review on some place.</td>
</tr>
<tr>
<td>UF</td>
<td>yelp_time_abs</td>
<td>yelp_time_abs=current_year-join_yelp_year</td>
</tr>
<tr>
<td>UF</td>
<td>compliment</td>
<td>We can not get compliment from a yelp crawler. We have to used yelp openDB or other ways.</td>
</tr>
<tr>
<td>UF</td>
<td>tips</td>
<td>-</td>
</tr>
<tr>
<td>UF</td>
<td>friends</td>
<td>-</td>
</tr>
<tr>
<td>UF</td>
<td>followers</td>
<td>-</td>
</tr>
<tr>
<td>UF</td>
<td>photos</td>
<td>The number of photos the user have sent.</td>
</tr>
</tbody>
</table>
<h2 class="mume-header" id="74-training-procedure">7.4. Training Procedure</h2>

<h3 class="mume-header" id="741-parameter-tune">7.4.1. Parameter Tune</h3>

<p>This implementation uses <code>GridSearchCV</code> to tune parameters. In <code>classifier.py</code> the parameters were already tuned and hard coded. You can refer to <code>Usage</code> in this document to tune parameters manually.</p>
<h3 class="mume-header" id="742-training">7.4.2. Training</h3>

<p>The training procedure includes:</p>
<ol>
<li>Get the tf-idf model for review text.</li>
<li>Training the SVM classifier for review text.</li>
<li>Training the XGBoost classifier for social features, such as user features and review features.</li>
<li>Training the XGBoost classifier for stacking</li>
</ol>
<h3 class="mume-header" id="743-combine-results-from-different-regressors-ensemble-learning-stacking">7.4.3. Combine Results From Different Regressors (Ensemble Learning: Stacking)</h3>

<p>This implementation uses <code>Xgboost</code> as the stacking regressor.</p>
<h2 class="mume-header" id="75-testing-procedure">7.5. Testing Procedure</h2>

<p>The test is a basic 10-fold cross-validation.</p>
<p>In this scene, what is important is the recall/precision rate for fake reviews. In many sequences, real reviews outnumber fake reviews greatly. Therefore it is not easy for the classifier to find out the fake one among a lot of real reviews. In addition to average recall and average precision, we will also pay attention to recall of the fake reviews and precision of the fake reviews.</p>
<hr>
<h1 class="mume-header" id="8-classification-results">8. Classification Results</h1>

<h2 class="mume-header" id="81-comparison-of-different-features-and-models">8.1. Comparison of different features and models</h2>

<p>Following results are based on <code>Hotel</code> dataset.</p>
<table>
<thead>
<tr>
<th>Features</th>
<th>Classifier</th>
<th>Ave Precision</th>
<th>Ave Recall</th>
<th>Fake Review Precision</th>
<th>Fake Review Recall</th>
</tr>
</thead>
<tbody>
<tr>
<td>TF+TFS</td>
<td>svm(sgd)</td>
<td>0.661424</td>
<td>0.528513</td>
<td>0.45</td>
<td>0.07</td>
</tr>
<tr>
<td>TF+TFS+RF</td>
<td>svm(sgd)+xgb</td>
<td>0.802979</td>
<td>0.717550</td>
<td>0.64</td>
<td>0.07</td>
</tr>
<tr>
<td>TF+TFS+UF</td>
<td>svm(sgd)+xgb</td>
<td>0.802979</td>
<td>0.717550</td>
<td>0.65</td>
<td>0.42</td>
</tr>
<tr>
<td>TF+TFS+UF+RF</td>
<td>svm(sgd)+xgb</td>
<td>0.826662</td>
<td>0.776903</td>
<td>0.73</td>
<td>0.58</td>
</tr>
</tbody>
</table>
<p>Here we will not show the result of using different sub features (for example, Friends / Followers in UF), for there are too many features to show.</p>
<p>To test the model's ability of generalization, we run this model on a different data set <code>Restaurant</code>. <code>Restaurant</code> data set is in different field and it is 5 times larger then <code>Hotel</code> data set.</p>
<p>Test on a different dataset (Restaurant dataset) provided that this mode has a good ability of generalization.</p>
<p>We did not choose to use that model because there are many dirty data in that dataset.</p>
<h1 class="mume-header" id="9-result-analyze">9. Result analyze</h1>

<h2 class="mume-header" id="91-text-feature-is-not-powerful">9.1. Text Feature is not powerful</h2>

<p>As mentioned in <em>What Yelp Fake Review Filter Might Be Doing</em>[3], Text feature alone is not powerful enough, it is far less powerful than the social features (including user features and review features). It's pres/recall result is about 0.2 lower then the result of using social features. Its recall of the fake reviews is less than 0.1 but, what is important is, its precision of the fake reviews is about 0.5 or higher. That means it can figure out some critical patterns in fake reviews, but maybe not all the fake reviews have them. And, as the test result shows, including TF model does improve the final result.</p>
<h2 class="mume-header" id="92-rf-important-feature-for-real-reviews">9.2. RF: Important feature for real reviews</h2>

<p>RF (review features) include <code>cool_vote</code>, <code>useful_vote</code> and <code>funny_vote</code>, these features are created by real user. Combining<br>
UF and TF, we got the following result:</p>
<pre data-role="codeBlock" data-info="" class="language-"><code>TF+TFS+RF|svm(sgd)+xgb|0.802979|0.717550|0.64|0.07
</code></pre><p>It seems only a little bit better than only using TF. Yet what is important is the recall of the real reviews in this model. It is between 0.99 - 1.00 in all the 10 folds. It proves that how other people think about a review is important because it provides the classifier a review quality score based on human judgement. Inspired by that, we may try more human made features besides other statistical features.</p>
<h1 class="mume-header" id="10-further-improvement">10. Further improvement</h1>

<h2 class="mume-header" id="101-user-graph">10.1. User graph.</h2>

<p>It is also mentioned that using more detailed social features (like social graph) will be of great help for the project. But the problem is our marked data set do not have enough information for use to build a user graph. And it is difficult to crawl it because we have to crawl many pages to build a user network, which will take a great period of time. Also, it is not easy to decide the size of the network need to be built. As a result, for performance consideration, we did not include complex social features in the final version.</p>
<h2 class="mume-header" id="102-bi-gram-n-gram-model">10.2. bi-gram / n-gram model</h2>

<blockquote>
<p>A collection of unigrams (what bag of words is) cannot capture phrases and multi-word expressions, effectively disregarding any word order dependence. Additionally, the bag of words model doesn’t account for potential misspellings or word derivations.</p>
</blockquote>
<p>By introducing n-gram model, we can learn from phrases and multi-word expressions, which may be helpful in fake review detection.</p>
<h2 class="mume-header" id="103-nn">10.3. NN</h2>

<p>Introducing Neutral Network is another possible way to improve this classifier. A possible idea is using LSTM (Long Short Term Memory networks) or basic RNN, for they can make use of the location information.</p>
<h1 class="mume-header" id="11-reference">11. Reference</h1>

<p>[1] Arjun Mukherjee, Vivek Venkataraman, Bing Liu, and Natalie Glance. What Yelp Fake Review Filter Might Be Doing. Proceedings of The International AAAI Conference on Weblogs and Social Media (ICWSM-2013), July 8-10, 2013, Boston, USA.</p>
<p>[2] Hutto, C.J. &amp; Gilbert, E.E. (2014). VADER: A Parsimonious Rule-based Model for Sentiment Analysis of Social Media Text. Eighth International Conference on Weblogs and Social Media (ICWSM-14). Ann Arbor, MI, June 2014.</p>
<p>[3] Arjun Mukherjee, Vivek Venkataraman, Bing Liu, and Natalie Glance. What Yelp Fake Review Filter Might Be Doing. Proceedings of The International AAAI Conference on Weblogs and Social Media (ICWSM-2013), July 8-10, 2013, Boston, USA.</p>
<p>[4] Chen, T., &amp; Guestrin, C. (2016, August). Xgboost: A scalable tree boosting system. In Proceedings of the 22nd acm sigkdd international conference on knowledge discovery and data mining (pp. 785-794). ACM.</p>
<hr>
<p>Copyright (c) 2019 Wang Huaqiang</p>

      </div>
      
      
    
    
    <script>
// config mermaid init call
// http://knsv.github.io/mermaid/#configuration
//
// You can edit the 'MERMAID_CONFIG' variable below.
MERMAID_CONFIG = {
  startOnLoad: false
}

if (window['MERMAID_CONFIG']) {
  window['MERMAID_CONFIG'].startOnLoad = false
  window['MERMAID_CONFIG'].cloneCssStyles = false
  window['MERMAID_CONFIG'].theme = "forest"
}
mermaid.initialize(window['MERMAID_CONFIG'] || {})

if (typeof(window['Reveal']) !== 'undefined') {
  function mermaidRevealHelper(event) {
    var currentSlide = event.currentSlide
    var diagrams = currentSlide.querySelectorAll('.mermaid')
    for (var i = 0; i < diagrams.length; i++) {
      var diagram = diagrams[i]
      if (!diagram.hasAttribute('data-processed')) {
        mermaid.init(null, diagram, ()=> {
          Reveal.slide(event.indexh, event.indexv)
        })
      }
    }
  }

  Reveal.addEventListener('slidechanged', mermaidRevealHelper)
  Reveal.addEventListener('ready', mermaidRevealHelper)
} else {
  mermaid.init(null, document.getElementsByClassName('mermaid'))
}
</script><div class="mermaidTooltip" style="opacity: 0;"></div>
    
    
    
    
    
  </body></html>